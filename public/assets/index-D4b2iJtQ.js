var $e=Object.defineProperty;var Oe=P=>{throw TypeError(P)};var Je=(P,t,e)=>t in P?$e(P,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):P[t]=e;var c=(P,t,e)=>Je(P,typeof t!="symbol"?t+"":t,e),le=(P,t,e)=>t.has(P)||Oe("Cannot "+e);var p=(P,t,e)=>(le(P,t,"read from private field"),e?e.call(P):t.get(P)),S=(P,t,e)=>t.has(P)?Oe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(P):t.set(P,e),D=(P,t,e,i)=>(le(P,t,"write to private field"),i?i.call(P,e):t.set(P,e),e),R=(P,t,e)=>(le(P,t,"access private method"),e);var ce=(P,t,e,i)=>({set _(s){D(P,t,s,e)},get _(){return p(P,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const it=class it{static getLast(t,e=0){return t[t.length-1-e]}static addAt(t,e,i=0){return t.slice(0,i).concat(e,t.slice(i))}static random(t,e,i=0){return+(Math.random()*(e-t)+t).toFixed(i)}static clamp(t,e=1/0,i=1/0){return t<e?e:t>i?i:t}static isDefined(t){return t!=null}static isFunction(t){return typeof t=="function"}static round(t,e=1){const i=10**e;return Math.round(t*i)/i}static unlinkArr2(t){return[t[0],t[1]]}static unlinkArr3(t){return[t[0],t[1],t[2]]}static unlinkArr22(t){const e=Array.isArray,i=it.unlinkArr2,s=t==null?void 0:t[0],r=t==null?void 0:t[1];return e(t)?[e(s)?i(s):s,e(r)?i(r):r]:t}static getDist(t,e,i,s){return Math.sqrt((t-i)**2+(e-s)**2)}static getLinearFn(t,e){const i=(e[1]-t[1])/(e[0]-t[0]),s=-i*t[0]+t[1];return[i,s,r=>i*r+s,t]}static getPerpendicularLinearFn(t){const e=-1/t[0],i=t[3],s=-e*i[0]+i[1];return[e,s,r=>e*r+s,i]}static getValueFromRange(t){return Array.isArray(t)?it.random(t[0],t[1]):t}static arrayEquals(t,e){return t.length===e.length&&t.every((i,s)=>i==e[s])}static arr2Equals(t,e){return t&&e&&t[0]==e[0]&&t[1]==e[1]}static arr22Equals(t,e){return t&&e&&t[0][0]==e[0][0]&&t[0][1]==e[0][1]&&t[1][0]==e[1][0]&&t[1][1]==e[1][1]}static mod(t,e,i=t){return t-e*i-(i<0)*t}static toRad(t){return t*it.TO_DEGREES}static toDeg(t){return t/it.TO_DEGREES}static getAcceptableDiff(t,e=it.DEFAULT_ACCEPTABLE_DIFFERENCE){return Math.round(t)-t<=e?Math.round(t):t}static getMinMax(t,e=null){let i=1/0,s=-1/0,r=t.length;for(let n=0;n<r;n++){const a=e?+t[n][e]:t[n];a<i&&(i=a),a>s&&(s=a)}return[i,s]}static repeatedTimeout(t,e,i=5){let s=0;for(let r=0;r<t;r++)setTimeout(()=>e(r),s+=i)}static stackTraceLog(...t){try{throw new Error("stackTraceLog")}catch(e){console.log(e,...t)}}};c(it,"DEFAULT_ACCEPTABLE_DIFFERENCE",1e-7),c(it,"CIRC",2*Math.PI),c(it,"TO_DEGREES",Math.PI/180);let u=it;const st=class st{static toggleCenter(t,e,i=5,s=[255,0,0,1]){if(st.SHOW_CENTERS_DOT_ID[e.id])t.remove(st.SHOW_CENTERS_DOT_ID[e.id]),delete st.SHOW_CENTERS_DOT_ID[e.id];else{const r=new G([0,0],i,s,null,e);st.SHOW_CENTERS_DOT_ID[e.id]=r.id,t.add(r)}}static showIntersectionPoints(t,e){const i=new G(e.source.inner,3,[255,0,0,1]),s=new G(e.source.outer,3,[255,0,0,.45]),r=new G(e.target.outer,3,[255,0,0,.45]),n=new G(e.target.inner,3,[255,0,0,1]);t.add(i),t.add(s),t.add(r),t.add(n)}static firstDotOnly(t){return t.id==t.parent.firstDot.id}static drawOuterRing(t,e,i,s){const r=e.colorObject??e,n=N.OPACITY_VISIBILITY_THRESHOLD,a=e._filter;r[3]<n||r.a<n||(a&&a.indexOf("#")!==-1&&!s?t.render.stroke(x.getArc(t.pos,(t.radius||1)*i),e):t.render.batchStroke(x.getArc(t.pos,(t.radius||1)*i),e))}static drawLine(t,e,i,s=0,r=x.getLine,n,a){const o=i.colorObject??i,h=N.OPACITY_VISIBILITY_THRESHOLD,l=i._filter;if(!(o[3]<h||o.a<h))if(s){const d=t.getLinearIntersectPoints(e,(e.radius??Dt.DEFAULT_RADIUS)*s,t,t.radius*s);l&&l.indexOf("#")!==-1&&!a?t.render.stroke(r(d[0][0],d[1][0],n),i):t.render.batchStroke(r(d[0][0],d[1][0],n),i)}else l&&l.indexOf("#")!==-1&&!a?t.render.stroke(r(t.pos,e.pos??e,n),i):t.render.batchStroke(r(t.pos,e.pos??e,n),i)}static drawDotConnections(t,e,i=0,s=x.getLine,r,n){const a=t.render,o=t.pos,h=t.connections,l=t.connections.length,d=e.colorObject??e,_=N.OPACITY_VISIBILITY_THRESHOLD,E=e._filter,T=E&&E.indexOf("#")!==-1;if(s||(s=x.getLine),l){if(d[3]<_||d.a<_)return;if(i){const C=t.radius*i;for(let F=0;F<l;F++){const w=h[F],m=t.getLinearIntersectPoints(w,w.radius*i,t,C);T&&!n?a.stroke(s(m[0][0],m[1][0],r),e):a.batchStroke(s(m[0][0],m[1][0],r),e)}}else for(let C=0;C<l;C++)T&&!n?a.stroke(s(o,h[C].pos,r),e):a.batchStroke(s(o,h[C].pos,r),e)}}static getDraggableDotCB(){let t=!1,e=null;return(i,s,r,n,a=50)=>{var o;s.clicked&&r<a?(t=!0,((o=i==null?void 0:i.currentBacklogAnim)==null?void 0:o.id)==(e==null?void 0:e.id)&&e&&e.end(),i.x=s.x,i.y=s.y):t&&(t=!1,e=i.addForce(Math.min(u.mod(Math.min(s.speed,3e3),n)/4,300),s.dir,750+1200*n,Y.easeOutQuad))}}static getTrailEffectCB(t,e,i=8,s=null,r=!1){let n=[],a=new Array(i).fill(e.pos),o=null,h=u.arr2Equals,l=!r;for(let d=0;d<i;d++){const _=e.duplicate();n.push(_),t.add(_)}return d=>{let _=u.unlinkArr2(e.pos),E=!1;if(!h(o,_)){if(a.shift(),a.push(_),l)for(let T=0;T<i;T++)n[T].moveAt(a[T]);o=_,E=!0}if(s)for(let T=0;T<i;T++)s(n[T],(T+1)/i,E,d,a[T],T)}}static rotateGradient(t,e=1e3,i=1,s=!1){return t.playAnim(new Y(r=>t[s?"fillColorRaw":"colorRaw"].rotation=360*-i*r,e))}static lookAt(t,e,i=0){const[s,r]=t.pos,[n,a]=(e==null?void 0:e.pos)??e;t.rotation=i-u.toDeg(Math.atan2(r-a,-(s-n)))}};c(st,"SHOW_CENTERS_DOT_ID",{}),c(st,"SHAPES",{DEBUG_SHAPE:(t,e)=>new At(t||[100,100],e||[new G,new G([100]),new G([,100]),new G([100,100])]),THROWABLE_DOT:(t,e,i)=>{const s=st.getDraggableDotCB();return new At(t||[10,10],new G,e,i,null,(r,n,a,o,h,l,d)=>s(d.firstDot,h,l,a))}}),c(st,"FOLLOW_PATHS",{INFINITY_SIGN:(t,e,i)=>(t??(t=100),e??(e=50),i??(i=0),[[0,s=>{const r=u.CIRC*((s+i)%1);return[t*Math.sin(r),e*Math.sin(2*r)]}]]),CIRCLE:(t,e,i)=>(t??(t=100),e??(e=100),i??(i=0),[[0,s=>{const r=u.CIRC*((s+i)%1);return[t*Math.cos(r),e*Math.sin(r)]}]]),RECTANGLE:(t,e,i)=>(t??(t=100),e??(e=100),i??(i=0),[[0,s=>{const r=(s+i)%1*2*(t+e);return r<t?[r,0]:r<t+e?[t,r-t]:r<2*t+e?[t-(r-(t+e)),e]:[0,e-(r-(2*t+e))]}]]),QUADRATIC:(t,e,i)=>{t??(t=100),e??(e=200);const s=Math.pow(t/2,2);return[[0,r=>{let n=(r-.5)*t,a=e*(Math.pow(n,2)/s);return i&&(a=e-a),[n,a]}]]},LINEAR:(t,e)=>(t??(t=100),e??(e=1),[[0,i=>{const s=i*t;return[s,e*s]}]]),SINE_WAVE:(t,e)=>(t??(t=100),e??(e=100),[[0,i=>{const s=i*t;return[s,e*Math.sin(u.CIRC*s/t)]}]]),COSINE_WAVE:(t,e)=>(t??(t=100),e??(e=100),[[0,i=>{const s=i*t;return[s,e*Math.cos(u.CIRC*s/t)]}]]),RELATIVE:(t,e)=>{t??(t=void 0),e??(e=void 0);let i=!1,s=!1;return Array.isArray(t)&&(t=t.flat()[1],i=!0),Array.isArray(e)&&(e=e.flat()[1],s=!0),[[0,r=>[i?t(r)[0]:t,s?e(r)[1]:t]]]}});let ue=st;var B,z,zt,_e,X,de,jt,Ht,Ee,Ie;const g=class g{constructor(t,e=!1){S(this,zt);S(this,B,null);S(this,z,null);this._color=t instanceof g?t._color:t||g.DEFAULT_COLOR,this._format=g.getFormat(this._color),R(this,zt,_e).call(this),this._isChannel=e}static convertTo(t=g.FORMATS.RGBA,e){var h,l,d,_,E,T,C;let i=g.getFormat(e),s=e,r=g.FORMATS.RGBA,n=g.FORMATS.HEX,a=g.FORMATS.TEXT,o=g.FORMATS.HSV;return t==r?i==n?s=R(h=g,X,Ie).call(h,e):i==a?s=R(l=g,X,jt).call(l,g.CSS_COLOR_TO_RGBA_CONVERTIONS[e]):i==o&&(s=R(d=g,X,Ht).call(d,e)):t==n?i==r?s=R(_=g,X,Ee).call(_,e):R(E=g,X,Ee).call(E,g.convertTo(r,e)):t==a?s=i==r?g.RGBA_TO_CSS_COLOR_CONVERTIONS[e.toString()]??e:g.RGBA_TO_CSS_COLOR_CONVERTIONS[g.convertTo(r,e).toString()]??e:t==o&&(s=i==r?R(T=g,X,de).call(T,e):R(C=g,X,de).call(C,g.convertTo(r,e))),s}convertTo(t=g.FORMATS.RGBA,e=this._color){return g.convertTo(t,e)}static getFormat(t){return t||u.stackTraceLog(t),Array.isArray(t)?t.length==4?g.FORMATS.RGBA:g.FORMATS.HSV:t instanceof g?g.FORMATS.COLOR:t instanceof tt?g.FORMATS.GRADIENT:t instanceof J?g.FORMATS.PATTERN:t.includes("#")?g.FORMATS.HEX:g.FORMATS.TEXT}static adjust(t){return t instanceof g?t.isChannel?t:t.duplicate():new g(t)}static formatRgba(t){return Array.isArray(t)?`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`:null}static rgba(t=255,e=255,i=255,s=1){const r=u.round,n=g.DEFAULT_DECIMAL_ROUNDING_POINT;return[r(t,n),r(e,n),r(i,n),r(s,n)]}static getColorValue(t){return typeof t=="string"||t instanceof CanvasGradient||t instanceof CanvasPattern?t:t instanceof ct?t.value:g.formatRgba(t)??t.color}static findFirstPos(t,e,i=!1,s=g.DEFAULT_TEMPERANCE,r=g.DEFAULT_SEARCH_START,n=[]){let a,o,h,l,d,_,E,T=n[0]??t.width,C=n[1]??t.height,F=t.ctx.getImageData(0,0,T,C).data,w=4*T,m=e.r,Z=e.g,W=e.b,ut=255*e.a,bt=m-s,kt=Z-s,Bt=W-s,he=ut-s,Ge=m+s,Ye=Z+s,Xe=W+s,ze=ut+s,St=r==g.SEARCH_STARTS.TOP_LEFT,qe=St?0:T-1,We=St?T:-1,Ke=St?1:-1,Qe=St?C:-1,Ze=St?1:-1;for(o=St?0:C-1;o!==Qe;o+=Ze)for(h=o*w,a=qe;a!==We;a+=Ke)if(l=h+4*a,d=F[l],s){if(d>=bt&&d<=Ge&&(_=F[l+1],E=F[l+2],_>=kt&&_<=Ye&&E>=Bt&&E<=Xe&&(!i||void 0>=he&&void 0<=ze)))return[a,o]}else if(d==m&&F[l+1]==Z&&F[l+2]==W&&(!i||F[l+3]==ut))return[a,o];return null}duplicate(t){var e;return this._format==g.FORMATS.GRADIENT||this._format==g.FORMATS.PATTERN?new g(this._color.duplicate(t)):new g(R(e=g,X,jt).call(e,p(this,B)))}toString(){let t=g.getColorValue(this._color);return(t instanceof CanvasGradient||t instanceof CanvasPattern)&&(t=this._color.toString()),t}get color(){return this._format==g.FORMATS.GRADIENT||this._format==g.FORMATS.PATTERN?this._color.value:g.formatRgba(p(this,B))}get colorRaw(){return this._color}get isChannel(){return this._isChannel}get rgba(){return p(this,B)}get hsv(){return p(this,z)}get r(){return p(this,B)[0]}get g(){return p(this,B)[1]}get b(){return p(this,B)[2]}get a(){return p(this,B)[3]}get hue(){return p(this,z)[0]}get saturation(){return p(this,z)[1]}get brightness(){return p(this,z)[2]}set color(t){this._color=(t==null?void 0:t._color)||t,this._format=g.getFormat(this._color),R(this,zt,_e).call(this)}set r(t){p(this,B)[0]=u.round(t,g.DEFAULT_DECIMAL_ROUNDING_POINT)}set g(t){p(this,B)[1]=u.round(t,g.DEFAULT_DECIMAL_ROUNDING_POINT)}set b(t){p(this,B)[2]=u.round(t,g.DEFAULT_DECIMAL_ROUNDING_POINT)}set a(t){p(this,B)[3]=u.round(t,g.DEFAULT_DECIMAL_ROUNDING_POINT)}set rgba(t){p(this,B)[0]=u.round(t[0],g.DEFAULT_DECIMAL_ROUNDING_POINT),p(this,B)[1]=u.round(t[1],g.DEFAULT_DECIMAL_ROUNDING_POINT),p(this,B)[2]=u.round(t[2],g.DEFAULT_DECIMAL_ROUNDING_POINT),p(this,B)[3]=u.round(t[3],g.DEFAULT_DECIMAL_ROUNDING_POINT)}set hue(t){var e;t%=360,p(this,z)[0]!=t&&(p(this,z)[0]=t,D(this,B,R(e=g,X,Ht).call(e,p(this,z))))}set saturation(t){var e;t=t>100?100:t,p(this,z)[1]!=t&&(p(this,z)[1]=t,D(this,B,R(e=g,X,Ht).call(e,p(this,z))))}set brightness(t){var e;t=t>100?100:t,p(this,z)[2]!=t&&(p(this,z)[2]=t,D(this,B,R(e=g,X,Ht).call(e,p(this,z))))}};B=new WeakMap,z=new WeakMap,zt=new WeakSet,_e=function(){var t;if(this._format==g.FORMATS.GRADIENT||this._format==g.FORMATS.PATTERN)D(this,B,D(this,z,[]));else{D(this,B,this._format!==g.FORMATS.RGBA?this.convertTo(g.FORMATS.RGBA):R(t=g,X,jt).call(t,this._color));const e=p(this,B),i=g.DEFAULT_DECIMAL_ROUNDING_POINT;e[0]=u.round(e[0],i),e[1]=u.round(e[1],i),e[2]=u.round(e[2],i),e[3]=u.round(e[3],i),D(this,z,g.convertTo(g.FORMATS.HSV,p(this,B)))}},X=new WeakSet,de=function(t){let e,i=t[0]/255,s=t[1]/255,r=t[2]/255,n=Math.min(i,s,r),a=Math.max(i,s,r),o=a-n;return a==n?e=0:(e=a==i?(s-r)/o:a==s?(r-i)/o+2:(i-s)/o+4,e=(360+60*e)%360),[e,a&&o/a*100,100*a]},jt=function(t){return[t[0],t[1],t[2],t[3]]},Ht=function(t){let e,i,s,r=t[0],n=t[1]/100,a=t[2]/100,o=a*n,h=o*(1-Math.abs(r/60%2-1)),l=a-o;return 0<=r&&r<60?(e=o,i=h,s=0):60<=r&&r<120?(e=h,i=o,s=0):120<=r&&r<180?(e=0,i=o,s=h):180<=r&&r<240?(e=0,i=h,s=o):240<=r&&r<300?(e=h,i=0,s=o):(e=o,i=0,s=h),[Math.round(255*(e+l)),Math.round(255*(i+l)),Math.round(255*(s+l)),1]},Ee=function(t){return"#"+t.reduce((e,i,s)=>e+(!s||s%3?i:Math.round(255*i)).toString(16).padStart(2,"0"),"")},Ie=function(t){return t.padEnd(9,"F").match(/[a-z0-9]{2}/gi).reduce((e,i,s)=>e.concat(parseInt(i,16)/(!s||s%3?1:255)),[])},S(g,X),c(g,"DEFAULT_COLOR","aliceblue"),c(g,"DEFAULT_RGBA",[240,248,255,1]),c(g,"DEFAULT_COLOR_VALUE","rgba(240, 248, 255, 1)"),c(g,"CSS_COLOR_TO_RGBA_CONVERTIONS",{transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightsteelblue:[176,224,230,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]}),c(g,"RGBA_TO_CSS_COLOR_CONVERTIONS",{"0,0,0,0":"transparent","240,248,255,1":"aliceblue","250,235,215,1":"antiquewhite","0,255,255,1":"aqua","127,255,212,1":"aquamarine","240,255,255,1":"azure","245,245,220,1":"beige","255,228,196,1":"bisque","0,0,0,1":"black","255,235,205,1":"blanchedalmond","0,0,255,1":"blue","138,43,226,1":"blueviolet","165,42,42,1":"brown","222,184,135,1":"burlywood","95,158,160,1":"cadetblue","127,255,0,1":"chartreuse","210,105,30,1":"chocolate","255,127,80,1":"coral","100,149,237,1":"cornflowerblue","255,248,220,1":"cornsilk","220,20,60,1":"crimson","0,0,139,1":"darkblue","0,139,139,1":"darkcyan","184,134,11,1":"darkgoldenrod","169,169,169,1":"darkgray","0,100,0,1":"darkgreen","189,183,107,1":"darkkhaki","139,0,139,1":"darkmagenta","85,107,47,1":"darkolivegreen","255,140,0,1":"darkorange","153,50,204,1":"darkorchid","139,0,0,1":"darkred","233,150,122,1":"darksalmon","143,188,143,1":"darkseagreen","72,61,139,1":"darkslateblue","47,79,79,1":"darkslategray","0,206,209,1":"darkturquoise","148,0,211,1":"darkviolet","255,20,147,1":"deeppink","0,191,255,1":"deepskyblue","105,105,105,1":"dimgray","30,144,255,1":"dodgerblue","178,34,34,1":"firebrick","255,250,240,1":"floralwhite","34,139,34,1":"forestgreen","220,220,220,1":"gainsboro","248,248,255,1":"ghostwhite","255,215,0,1":"gold","218,165,32,1":"goldenrod","128,128,128,1":"gray","0,128,0,1":"green","173,255,47,1":"greenyellow","240,255,240,1":"honeydew","255,105,180,1":"hotpink","205,92,92,1":"indianred","75,0,130,1":"indigo","255,255,240,1":"ivory","240,230,140,1":"khaki","230,230,250,1":"lavender","255,240,245,1":"lavenderblush","124,252,0,1":"lawngreen","255,250,205,1":"lemonchiffon","173,216,230,1":"lightblue","240,128,128,1":"lightcoral","224,255,255,1":"lightcyan","250,250,210,1":"lightgoldenrodyellow","211,211,211,1":"lightgray","144,238,144,1":"lightgreen","255,182,193,1":"lightpink","255,160,122,1":"lightsalmon","32,178,170,1":"lightseagreen","135,206,250,1":"lightskyblue","119,136,153,1":"lightslategray","176,224,230,1":"lightsteelblue","255,255,224,1":"lightyellow","0,255,0,1":"lime","50,205,50,1":"limegreen","250,240,230,1":"linen","255,0,255,1":"magenta","128,0,0,1":"maroon","102,205,170,1":"mediumaquamarine","0,0,205,1":"mediumblue","186,85,211,1":"mediumorchid","147,112,219,1":"mediumpurple","60,179,113,1":"mediumseagreen","123,104,238,1":"mediumslateblue","0,250,154,1":"mediumspringgreen","72,209,204,1":"mediumturquoise","199,21,133,1":"mediumvioletred","25,25,112,1":"midnightblue","245,255,250,1":"mintcream","255,228,225,1":"mistyrose","255,228,181,1":"moccasin","255,222,173,1":"navajowhite","0,0,128,1":"navy","253,245,230,1":"oldlace","128,128,0,1":"olive","107,142,35,1":"olivedrab","255,165,0,1":"orange","255,69,0,1":"orangered","218,112,214,1":"orchid","238,232,170,1":"palegoldenrod","152,251,152,1":"palegreen","175,238,238,1":"paleturquoise","219,112,147,1":"palevioletred","255,239,213,1":"papayawhip","255,218,185,1":"peachpuff","205,133,63,1":"peru","255,192,203,1":"pink","221,160,221,1":"plum","128,0,128,1":"purple","102,51,153,1":"rebeccapurple","255,0,0,1":"red","188,143,143,1":"rosybrown","65,105,225,1":"royalblue","139,69,19,1":"saddlebrown","250,128,114,1":"salmon","244,164,96,1":"sandybrown","46,139,87,1":"seagreen","255,245,238,1":"seashell","160,82,45,1":"sienna","192,192,192,1":"silver","135,206,235,1":"skyblue","106,90,205,1":"slateblue","112,128,144,1":"slategray","255,250,250,1":"snow","0,255,127,1":"springgreen","70,130,180,1":"steelblue","210,180,140,1":"tan","0,128,128,1":"teal","216,191,216,1":"thistle","255,99,71,1":"tomato","64,224,208,1":"turquoise","238,130,238,1":"violet","245,222,179,1":"wheat","255,255,255,1":"white","245,245,245,1":"whitesmoke","255,255,0,1":"yellow","154,205,50,1":"yellowgreen"}),c(g,"FORMATS",{RGBA:"RGBA",TEXT:"TEXT",HEX:"HEX",GRADIENT:"GRADIENT",PATTERN:"PATTERN",COLOR:"COLOR",HSV:"HSVA"}),c(g,"STRICT_FORMATS",{RGBA:"RGBA",COLOR:"COLOR"}),c(g,"DEFAULT_TEMPERANCE",0),c(g,"SEARCH_STARTS",{TOP_LEFT:"TOP_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}),c(g,"DEFAULT_SEARCH_START",g.SEARCH_STARTS.TOP_LEFT),c(g,"DEFAULT_DECIMAL_ROUNDING_POINT",3),c(g,"OPACITY_VISIBILITY_THRESHOLD",.05);let N=g;class De{constructor(t){this._initColor=t,this._color=this._initColor}getInitColor(){return u.isFunction(this._initColor)?this._initColor(this):this._initColor||null}get colorObject(){return this._color}get colorRaw(){return this._color.colorRaw}get color(){var t;return(t=this._color)==null?void 0:t.color}get initColor(){return this._initColor}get rgba(){return this._color.rgba}get r(){return this._color.r}get g(){return this._color.g}get b(){return this._color.b}get a(){return this._color.a}get hsv(){return this._color.hsv}get hue(){return this._color.hue}get saturation(){return this._color.saturation}get brightness(){return this._color.brightness}set color(t){var i;const e=this._color;if(!e||((i=e==null?void 0:e.colorRaw)==null?void 0:i.toString())!==(t==null?void 0:t.toString())){const s=(t==null?void 0:t.colorRaw)||t;(s==null?void 0:s.positions)==ct.PLACEHOLDER&&((t=t.isChannel?s:s.duplicate()).initPositions=this),e instanceof N?e.color=t:this._color=N.adjust(t)}}set r(t){this._color.r=t}set g(t){this._color.g=t}set b(t){this._color.b=t}set a(t){this._color.a=t}set hue(t){this._color.hue=t}set saturation(t){this._color.saturation=t}set brightness(t){this._color.brightness=t}set initColor(t){this._initColor=t}}const Pt=class Pt{static get fontSource5x5(){const t=Pt.D;return{width:5,height:5,A:[[2,t.bl+t.br],[1,t.bl],[3,t.br],[0,t.r+t.b],[1,t.r],[2,t.r],[3,t.r],[4,t.b],[0,t.b],[4,t.b],[0],[4]],B:[[0,t.r+t.b],[,t.r],[,t.r],[,t.br],[0,t.b],[4,t.bl],[0,t.r+t.b],[,t.r],[,t.r],[,t.br],[0,t.b],[4,t.bl],[0,t.r],[,t.r],[,t.r],[]],C:[[1,t.r+t.bl],[,t.r],[,t.r],[],[0,t.b],[0,t.b],[0,t.br],[-1,t.r],[2,t.r],[,t.r],[]],D:[[0,t.r+t.b],[,t.r],[,t.r],[,t.br],[0,t.b],[4,t.b],[0,t.b],[4,t.b],[0,t.b],[4,t.bl],[0,t.r],[,t.r],[,t.r],[]],E:[[0,t.r+t.b],[,t.r],[,t.r],[,t.r],[],[0,t.b],[0,t.b+t.r],[,t.r],[,t.r],[,t.r],[0,t.b],[0,t.r],[,t.r],[,t.r],[,t.r],[]],F:[[0,t.r+t.b],[,t.r],[,t.r],[,t.r],[],[0,t.b],[0,t.b+t.r],[,t.r],[,t.r],[],[0,t.b],[0]],G:[[1,t.r+t.bl],[,t.r],[,t.r],[],[0,t.b],[0,t.b],[3,t.r],[4,t.b],[0,t.br],[4,t.b],[1,t.r],[,t.r],[,t.r],[]],H:[[0,t.r+t.b],[4,t.b],[0,t.b],[4,t.b],[0,t.b+t.r],[,t.r],[,t.r],[,t.r],[,t.b],[0,t.b],[4,t.b],[0],[4]],I:[[1,t.r],[,t.b+t.r],[],[2,t.b],[2,t.b],[2,t.b],[1,t.r],[,t.r],[]],J:[[1,t.r],[,t.r],[,t.b+t.r],[],[3,t.b],[3,t.b],[0,t.br],[3,t.bl],[1,t.r],[,t.r]],K:[[0,t.b],[3,t.bl],[0,t.b],[2,t.bl],[0,t.b+t.r],[,t.r+t.br],[0,t.b],[2,t.br],[0],[3,t.r]],L:[[0,t.b],[0,t.b],[0,t.b],[0,t.b],[0,t.r],[,t.r],[,t.r],[,t.r]],M:[[0,t.b+t.br],[4,t.b+t.bl],[0,t.b],[,t.br],[3,t.bl],[4,t.b],[0,t.b],[2],[4,t.b],[0,t.b],[4,t.b],[0],[4]],N:[[0,t.b+t.br],[4,t.b],[0,t.b],[,t.br],[4,t.b],[0,t.b],[2,t.br],[4,t.b],[0,t.b],[3,t.br],[4,t.b],[0],[4]],O:[[1,t.bl+t.r],[,t.r],[,t.br],[0,t.b],[4,t.b],[0,t.b],[4,t.b],[0,t.b+t.br],[4,t.b+t.bl],[1,t.r],[,t.r],[,t.r]],P:[[0,t.r+t.b],[,t.r],[,t.br],[0,t.b],[3,t.bl],[0,t.b+t.r],[,t.r],[],[0,t.b],[0]],Q:[[1,t.bl+t.r],[,t.r],[,t.br],[0,t.b],[4,t.b],[0,t.b],[4,t.b],[0,t.b+t.br],[3,t.br],[,t.bl],[1,t.r],[,t.r],[],[]],R:[[0,t.r+t.b],[,t.r],[,t.br],[0,t.b],[3,t.bl],[0,t.b+t.r],[,t.r+t.br],[],[0,t.b],[2,t.br],[0],[3]],S:[[1,t.r+t.bl],[,t.r],[,t.r],[],[0,t.br],[-1,t.r],[2,t.r],[,t.br],[-4,t.bl],[0,t.r+t.bl],[,t.r],[,t.r],[]],T:[[0,t.r],[,t.r],[,t.b+t.r],[,t.r],[],[2,t.b],[2,t.b],[2,t.b],[2]],U:[[0,t.r+t.b],[4,t.b],[0,t.b],[4,t.b],[0,t.b+t.r],[4,t.b],[0,t.br],[4,t.bl],[1,t.r],[,t.r],[,t.r]],V:[[0,t.r+t.b],[4,t.b],[0,t.b],[4,t.b],[0,t.br],[4,t.bl],[1,t.br],[3,t.bl],[2,t.r]],W:[[0,t.b+t.br],[4,t.b+t.bl],[0,t.b],[4,t.b],[0,t.b],[2,t.bl+t.br],[4,t.b],[0,t.b],[,t.bl],[3,t.br],[4,t.b],[0],[4]],X:[[0,t.br],[4,t.bl],[1,t.br],[3,t.bl],[2,t.br+t.bl],[1,t.bl],[3,t.br],[0],[4]],Y:[[0,t.br],[4,t.bl],[1,t.br],[3,t.bl],[2,t.b],[2,t.b],[2]],Z:[[0,t.r],[,t.r],[,t.r],[,t.r],[,t.bl],[3,t.bl],[2,t.bl],[1,t.bl],[0,t.r],[,t.r],[,t.r],[,t.r],[]],a:[[1/0],[1,t.bl+t.r],[,t.br],[0,t.b],[3,t.b],[0,t.br],[3,t.bl+t.br],[1,t.r],[],[4]],b:[[0,t.b],[0,t.b],[0,t.b+t.r],[,t.r],[,t.br],[0,t.b],[3,t.bl],[0,t.r],[,t.r],[,t.r]],c:[[1/0],[1,t.r+t.bl],[,t.r],[],[0,t.b],[0,t.br],[-1,t.r],[2,t.r],[]],d:[[3,t.b],[3,t.b],[1,t.bl+t.r],[,t.r],[,t.b],[0,t.br],[3,t.b],[1,t.r],[,t.r],[]],e:[[1,t.r+t.bl],[,t.br],[0,t.b],[3,t.bl],[0,t.b+t.r],[,t.r],[],[0,t.br],[3,t.bl],[1,t.r],[]],f:[[1,t.b+t.r],[],[1,t.b],[0,t.r],[,t.r+t.b],[],[1,t.b],[1]],g:[[1,t.bl+t.r],[,t.br],[0,t.br],[3,t.bl],[1,t.r],[,t.br],[0,t.br],[3,t.bl],[1,t.r],[]],h:[[0,t.b],[0,t.b],[0,t.b+t.r],[,t.r],[,t.br],[0,t.b],[3,t.b],[0],[3]],i:[[1/0],[1,t.i],[1,t.b],[1,t.b],[1]],j:[[2,t.i],[2,t.b],[2,t.b],[0,t.br],[2,t.bl],[1]],k:[[0,t.b],[0,t.b],[2,t.bl],[0,t.b],[2,t.bl],[0,t.b+t.r],[,t.br],[0],[2]],l:[[0,t.b],[0,t.b],[0,t.b],[0,t.b],[0]],m:[[1/0],[1,t.bl+t.br],[3,t.bl+t.br],[0,t.b],[2,t.b],[4,t.b],[0,t.b],[2,t.b],[4,t.b],[0],[2],[4]],n:[[1/0],[0,t.b],[,t.bl+t.r],[,t.bl+t.br],[0,t.b],[3,t.b],[0,t.b],[3,t.b],[0],[3]],o:[[1/0],[1,t.bl+t.r],[,t.br],[0,t.b],[3,t.b],[0,t.br],[3,t.bl],[1,t.r],[]],p:[[1,t.r+t.bl],[,t.br],[0,t.b],[3,t.bl],[0,t.b+t.r],[,t.r],[],[0,t.b],[0]],q:[[1,t.r+t.bl],[,t.br],[0,t.br],[3,t.b],[1,t.r],[,t.r],[,t.b],[3,t.b],[3]],r:[[1/0],[0,t.b],[,t.bl+t.r],[],[0,t.b],[0,t.b],[0]],s:[[1/0],[2,t.bl+t.br],[1,t.br],[3],[1,t.br],[2,t.r],[,t.b],[2,t.r],[]],t:[[2,t.b],[1,t.r],[,t.b+t.r],[],[2,t.b],[2,t.b],[2]],u:[[1/0],[0,t.b],[2,t.b],[0,t.b],[2,t.b],[0,t.br],[2,t.bl+t.br],[1,t.r],[3]],v:[[1/0],[1,t.b],[3,t.b],[1,t.b],[3,t.b],[1,t.br],[3,t.bl],[2,t.r]],w:[[1/0],[0,t.b],[2,t.b],[4,t.b],[0,t.b],[2,t.b],[4,t.b],[0,t.br],[2,t.bl+t.br],[4,t.bl],[1],[3]],x:[[1,t.b],[3,t.b],[1,t.br],[3,t.bl],[2,t.br+t.bl],[1,t.b],[3,t.b],[1],[3]],y:[[1/0],[1,t.b],[3,t.b],[1,t.br],[3,t.bl],[2,t.b],[2]],z:[[1/0],[0,t.r],[,t.r],[,t.r],[,t.bl],[2,t.bl],[1,t.bl],[0,t.r],[,t.r],[,t.r],[]],"!":[[3,t.b],[3,t.b],[3,t.b],[3],[3,t.i]],"?":[[1,t.r+t.bl],[,t.r],[,t.br],[0],[4,t.bl],[3,t.bl],[2],[2,t.i]],"@":[[1,t.bl+t.r],[,t.r],[,t.br],[0,t.b],[2,t.bl+t.br],[4,t.b],[0,t.b],[1,t.br],[3,t.b],[4,t.b],[0,t.b+t.br],[2,t.r],[3,t.r],[4],[1,t.r],[,t.r],[,t.r]],"#":[[1,t.b],[3,t.b],[0,t.r],[1,t.b+t.r],[2,t.r],[3,t.b+t.r],[],[1,t.b],[3,t.b],[0,t.r],[1,t.b+t.r],[2,t.r],[3,t.b+t.r],[],[1],[3]],$:[[1,t.r+t.bl],[,t.r+t.b],[,t.r],[],[0,t.br],[2,t.b],[1,t.r],[2,t.r+t.b],[,t.br],[2,t.b],[4,t.bl],[0,t.r+t.bl],[,t.r],[,t.r],[]],"%":[[0,t.r+t.b],[1,t.b],[4,t.bl],[0,t.r],[],[3,t.bl],[2,t.bl],[1,t.bl],[3,t.r+t.b],[4,t.b],[0],[3,t.r],[]],"^":[[2,t.br+t.bl],[1],[3]],"&":[[0,t.r+t.br],[,t.r],[,t.r],[,t.bl],[1,t.br],[2,t.bl],[1,t.bl],[2,t.br],[0,t.br],[3,t.br],[,t.bl],[1,t.r],[2,t.r],[3],[]],"*":[[1,t.br],[,t.b],[,t.bl],[1,t.r],[,t.r],[],[1,t.tr],[,t.t],[,t.tl]],"(":[[3,t.bl],[2,t.b],[2,t.b],[2,t.br],[-3]],")":[[1,t.br],[-2,t.b],[2,t.b],[2,t.bl],[1]],"{":[[3,t.bl],[2,t.b],[1,t.r],[2,t.b],[2,t.br],[-3]],"}":[[1,t.br],[-2,t.b],[2,t.b+t.r],[],[2,t.bl],[1]],",":[[1/0],[1/0],[1/0],[1,t.bl],[0]],".":[[1/0],[1/0],[1/0],[1/0],[0,t.i]],"+":[[1/0],[2,t.b],[1,t.r],[2,t.b+t.r],[],[2]],_:[[1/0],[1/0],[1/0],[1/0],[0,t.r],[,t.r],[,t.r],[,t.r],[,t.r]],"-":[[1/0],[1/0],[1,t.r],[,t.r],[]],"=":[[1/0],[1,t.r],[,t.r],[,t.r],[1/0],[1,t.r],[,t.r],[,t.r]],";":[[2,t.r+t.b],[3,t.b],[2,t.r],[],[2,t.r+t.b],[3,t.b],[2,t.r],[,t.b],[3]],":":[[1/0],[2,t.r+t.b],[3,t.b],[2,t.r],[],[2,t.r+t.b],[3,t.b],[2,t.r],[]],"[":[[2,t.b+t.r],[3],[2,t.b],[2,t.b],[2,t.b],[2,t.r],[3]],"]":[[1,t.r],[2,t.b],[2,t.b],[2,t.b],[2,t.b],[1,t.r],[2]],"'":[[0,t.b],[0]],"|":[[2,t.b],[2,t.b],[2,t.b],[2,t.b],[2]],"/":[[4,t.bl],[3,t.bl],[2,t.bl],[1,t.bl],[0]],"\\":[[0,t.br],[-1,t.br],[-2,t.br],[-3,t.br],[-4]],0:[[1,t.bl+t.r],[,t.br],[0,t.b],[3,t.b],[0,t.b],[,t.r],[],[,t.b],[0,t.b+t.br],[3,t.b+t.bl],[1,t.r],[,t.r]],1:[[2,t.b+t.bl],[1],[,t.b],[2,t.b],[2,t.b],[1,t.r],[,t.r],[]],2:[[1,t.r+t.bl],[,t.br],[0],[3,t.bl],[2,t.bl],[1,t.bl],[0,t.r],[,t.r],[,t.r],[,t.r]],3:[[1,t.r+t.bl],[,t.br],[0],[3,t.bl],[2,t.br],[0,t.br],[3,t.bl],[1,t.r],[,t.r]],4:[[3,t.b+t.bl],[2,t.bl],[,t.b],[1,t.bl],[3,t.b],[0,t.r],[,t.r],[,t.r],[,t.r+t.b],[,t.r],[3]],5:[[1,t.r+t.b],[,t.r],[,t.r],[],[1,t.b],[-1,t.r],[2,t.r],[,t.br],[-4,t.bl],[1,t.r+t.bl],[,t.r],[]],6:[[0,t.r+t.b],[,t.r],[,t.r],[,t.r],[0,t.b],[0,t.r+t.b],[,t.r],[,t.r],[,t.r+t.b],[0,t.b],[3,t.b],[0,t.r],[,t.r],[,t.r],[,t.r]],7:[[0,t.r],[,t.r],[,t.r],[,t.b],[3,t.bl],[1,t.r],[,t.bl+t.r],[],[1,t.bl],[0]],8:[[1,t.bl+t.r],[,t.br],[0,t.br],[3,t.bl],[1,t.bl+t.r],[,t.br],[0,t.b+t.br],[3,t.b+t.bl],[1,t.r],[,t.r]],9:[[1,t.r+t.bl],[,t.br],[0,t.br],[3,t.bl+t.b],[1,t.r],[],[,t.b],[3,t.b],[3]]}}};c(Pt,"D",["t","r","b","l","tr","br","bl","tl","i"].reduce((t,e,i)=>(t.places.push([t[e]=1<<i,s=>i==0?-s:i==1?1:i==2?s:i==3?-1:i==4?1-s:i==5?s+1:i==6?s-1:i==7?-s-1:i==8?0:void 0]),t),{places:[]})),c(Pt,"DEFAULT_SOURCE",Pt.fontSource5x5);let Le=Pt;class je{constructor(){this._keysPressed=[]}setDown(t){let e=t.key;e&&(e=e.toUpperCase(),this.isDown(e)||this._keysPressed.push({key:e,keyCode:t.keyCode}))}setUp(t){let e=t.key;e&&(e=e.toUpperCase(),this.isDown(e)&&(this._keysPressed=this._keysPressed.filter(i=>i.key!==e)))}isDown(t){return!!this._keysPressed.find(e=>e.key==t.toUpperCase())}hasKeysDown(){return!!this._keysPressed.length}get keysPressedRaw(){return this._keysPressed}get keysPressed(){return this._keysPressed.map(t=>t.key)}get keyCodesPressed(){return this._keysPressed.map(t=>t.keyCode)}set keysPressed(t){this._keysPressed=t}}const dt=class dt{constructor(){this._valid=!1,this._x=null,this._y=null,this._rawX=null,this._rawY=null,this._lastX=null,this._lastY=null,this._dir=null,this._speed=null,this._clicked=!1,this._rightClicked=!1,this._scrollClicked=!1,this._extraForwardClicked=!1,this._extraBackClicked=!1}calcSpeed(t){const e=dt.DEFAULT_MOUSE_DECELERATION;isFinite(this._lastX)&&isFinite(this._lastY)&&t?(this._speed=this._speed*e+u.getDist(this._x,this._y,this._lastX,this._lastY)/t*(1-e),this._speed<dt.DEFAULT_MOUSE_MOVE_TRESHOLD&&(this._speed=0)):this._speed=0,this._lastX=this._x,this._lastY=this._y}calcAngle(){const t=this._x-this._lastX,e=this._y-this._lastY;if(isFinite(t)&&isFinite(e)&&(t||e)){let i=(360-u.toDeg(Math.atan2(e,t)))%360-this._dir;i+=360*(i<-180)-360*(i>180),this._dir=(this._dir+i*dt.DEFAULT_MOUSE_ANGULAR_DECELERATION+360)%360}else this._dir=0}setMouseClicks(t){const e=t.type=="mousedown"||t.type=="touchstart";t.button==0?this._clicked=e:t.button==1?this._scrollClicked=e:t.button==2?this._rightClicked=e:t.button==3?this._extraBackClicked=e:t.button==4&&(this._extraForwardClicked=e)}invalidate(){this._x=1/0,this._y=1/0,this._rawX=1/0,this._rawY=1/0}updatePos(t,e){this._valid=!0,this._rawX=t.x,this._rawY=t.y,this._x=t.x-e.x,this._y=t.y-e.y}checkValid(){return this._x==1/0||this._x==null||this._y==1/0||this._y==null?this._valid=!1:this._valid?void 0:this._valid=!0}get valid(){return this._valid}get x(){return this._x}get y(){return this._y}get rawX(){return this._rawX}get rawY(){return this._rawY}get pos(){return[this._x,this._y]}get rawPos(){return[this._rawX,this._rawY]}get lastX(){return this._lastX}get lastY(){return this._lastY}get dir(){return this._dir}get speed(){return this._speed}get clicked(){return this._clicked}get scrollClicked(){return this._scrollClicked}get rightClicked(){return this._rightClicked}get extraBackClicked(){return this._extraBackClicked}get extraForwardClicked(){return this._extraForwardClicked}set valid(t){return this._valid=t}set lastX(t){return this._lastX=t}set lastY(t){return this._lastY=t}set dir(t){return this._dir=t}set speed(t){return this._speed=t}set clicked(t){return this._clicked=t}set scrollClicked(t){return this._scrollClicked=t}set rightClicked(t){return this._rightClicked=t}set extraBackClicked(t){return this._extraBackClicked=t}set extraForwardClicked(t){return this._extraForwardClicked=t}};c(dt,"DEFAULT_MOUSE_DECELERATION",.8),c(dt,"DEFAULT_MOUSE_MOVE_TRESHOLD",.1),c(dt,"DEFAULT_MOUSE_ANGULAR_DECELERATION",.2);let Ae=dt;var pt,qt,Wt;const L=class L{constructor(t){S(this,pt,[N.DEFAULT_COLOR_VALUE,L.DEFAULT_FILTER,L.DEFAULT_COMPOSITE_OPERATION,L.DEFAULT_ALPHA]);S(this,qt,y.DEFAULT_PROFILE.getStyles());S(this,Wt,K.DEFAULT_PROFILE.getStyles());this._ctx=t,this._batchedStrokes={},this._batchedFills={},this._bactchedStandalones=[],this._defaultProfile=y.DEFAULT_PROFILE.duplicate(this),this._profile1=this._defaultProfile.duplicate(),this._profile2=this._defaultProfile.duplicate(),this._profile3=this._defaultProfile.duplicate(),this._profile4=this._defaultProfile.duplicate(),this._profile5=this._defaultProfile.duplicate(),this._profiles=[],this._defaultTextProfile=K.DEFAULT_PROFILE.duplicate(this),this._textProfile1=this._defaultTextProfile.duplicate(),this._textProfile2=this._defaultTextProfile.duplicate(),this._textProfile3=this._defaultTextProfile.duplicate(),this._textProfile4=this._defaultTextProfile.duplicate(),this._textProfile5=this._defaultTextProfile.duplicate(),this._textProfiles=[]}static getLine(t,e){const i=new Path2D;return i.moveTo(t[0],t[1]),i.lineTo(e[0],e[1]),i}static getQuadCurve(t,e,i){Array.isArray(i)||(i=L.getDefaultQuadraticControlPos(t,e,i||void 0));const s=new Path2D;return s.moveTo(t[0],t[1]),s.quadraticCurveTo(i[0],i[1],e[0],e[1]),s}static getDefaultQuadraticControlPos(t,e,i=1){return[e[0]*i,t[1]*i]}static getBezierCurve(t,e,i,s){if(!s||!i){const n=L.getDefaultBezierControlPos(t,e,i||void 0);i=n[0],s??(s=n[1])}const r=new Path2D;return r.moveTo(t[0],t[1]),r.bezierCurveTo(i[0],i[1],s[0],s[1],e[0],e[1]),r}static getDefaultBezierControlPos(t,e,i=.75){const[s,r]=t,[n,a]=e;return[[s+(n-s)*(1-i),r+(a-r)*i],[n-(n-s)*(1-i),a-(a-r)*i]]}static getArc(t,e=5,i=0,s=u.CIRC){const r=new Path2D;return r.arc(t[0],t[1],e,i,s),r}static getArcTo(t,e,i,s){const r=new Path2D;return r.moveTo(t[0],t[1]),r.arcTo(e[0],e[1],i[0],i[1],s),r}static getEllispe(t,e,i,s=0,r=u.CIRC,n=!1){const a=new Path2D;return a.ellipse(t[0],t[1],e,i,s,r,n),a}static getRect(t,e,i){const s=new Path2D;return s.rect(t[0],t[1],e,i),s}static getRoundRect(t,e,i,s){const r=new Path2D;return r.roundRect(t[0],t[1],e,i,s),r}createCustomStylesProfile(t=this._defaultProfile){const e=t.duplicate();return this._profiles.push(e),e}createCustomTextStylesProfile(t=this._defaultTextProfile){const e=t.duplicate();return this._textProfiles.push(e),e}batchStroke(t,e=N.DEFAULT_RGBA,i=[]){if(e[3]??e.a??1>N.OPACITY_VISIBILITY_THRESHOLD){const s=i[0],r=i[1],n=i[2],a=e instanceof y?e.toString(void 0,s,r,n):this._defaultProfile.toString(e,s,r,n);this._batchedStrokes[a]||(this._batchedStrokes[a]=new Path2D),this._batchedStrokes[a].addPath(t)}}batchFill(t,e=N.DEFAULT_RGBA,i=[]){if(e[3]??e.a??1>N.OPACITY_VISIBILITY_THRESHOLD){const s=i[0],r=i[1],n=i[2],a=e instanceof y?e.fillOptimizedToString(void 0,s,r,n):this._defaultProfile.fillOptimizedToString(e,s,r,n);this._batchedFills[a]||(this._batchedFills[a]=new Path2D),this._batchedFills[a].addPath(t)}}drawBatched(){const t=Object.entries(this._batchedStrokes),e=t.length,i=Object.entries(this._batchedFills),s=i.length,r=this._bactchedStandalones,n=r.length,a=tt.SERIALIZATION_SEPARATOR,o=J.SERIALIZATION_SEPARATOR,h=L.DEFAULT_FILTER,l=L.DEFAULT_COMPOSITE_OPERATION,d=L.DEFAULT_ALPHA;for(let _=0;_<e;_++){let[E,T]=t[_],[C,F,w,m,Z,W,ut,bt,kt]=E.split(y.SERIALIZATION_SEPARATOR);C.includes(a)?C=tt.getCanvasGradientFromString(this._ctx,C):C.includes(o)&&(C=J.LOADED_PATTERN_SOURCES[C.split(o)[0]].value),y.apply(this,C,F,w,m,Z,W?W.split(",").map(Number).filter(Bt=>Bt):[0],ut,bt,kt),this._ctx.stroke(T)}y.apply(this,null,h,l,d);for(let _=0;_<s;_++){let[E,T]=i[_],[C,F,w,m]=E.split(y.SERIALIZATION_SEPARATOR);C.includes(a)?C=tt.getCanvasGradientFromString(this._ctx,C):C.includes(o)&&(C=J.LOADED_PATTERN_SOURCES[C.split(o)[0]].value),y.apply(this,C,F,w,m),this._ctx.fill(T)}if(y.apply(this,null,h,l,d),n){for(let _=0;_<n;_++)r[_]();this._bactchedStandalones=[]}this._batchedStrokes={},this._batchedFills={}}stroke(t,e=N.DEFAULT_RGBA,i=[]){if(e[3]??e.a??1>N.OPACITY_VISIBILITY_THRESHOLD){const s=i[0],r=i[1],n=i[2];e instanceof y?e.apply(void 0,s,r,n):this._defaultProfile.apply(e,s,r,n),this._ctx.stroke(t),y.apply(this,null,L.DEFAULT_FILTER,L.DEFAULT_COMPOSITE_OPERATION,L.DEFAULT_ALPHA)}}fill(t,e=N.DEFAULT_RGBA,i=[]){if(e[3]??e.a??1>N.OPACITY_VISIBILITY_THRESHOLD){const s=i[0],r=i[1],n=i[2];e instanceof y?e.apply(void 0,s,r,n):this._defaultProfile.apply(e,s,r,n),this._ctx.fill(t),y.apply(this,null,L.DEFAULT_FILTER,L.DEFAULT_COMPOSITE_OPERATION,L.DEFAULT_ALPHA)}}strokeText(t,e,i,s,r=void 0,n=12,a=[]){if(t){const o=N.getColorValue(i),h=p(this,pt),l=a==null?void 0:a.length;if(s instanceof K?s.apply():this._defaultTextProfile.apply(s),i&&h[0]!==o&&(h[0]=this._ctx.strokeStyle=this._ctx.fillStyle=o),l&&y.apply(this,null,a[0],a[1],a[2]),t.includes(`
`)){const d=t.split(`
`),_=d.length;for(let E=0;E<_;E++)this._ctx.strokeText(d[E],e[0],e[1]+E*n,r)}else this._ctx.strokeText(t,e[0],e[1],r);y.apply(this,null,L.DEFAULT_FILTER,L.DEFAULT_COMPOSITE_OPERATION,L.DEFAULT_ALPHA)}}fillText(t,e,i,s,r=void 0,n=12,a=[]){if(t){const o=N.getColorValue(i),h=p(this,pt),l=a==null?void 0:a.length;if(s instanceof K?s.apply():this._defaultTextProfile.apply(s),i&&h[0]!==o&&(h[0]=this._ctx.strokeStyle=this._ctx.fillStyle=o),l&&y.apply(this,null,a[0],a[1],a[2]),t.includes(`
`)){const d=t.split(`
`),_=d.length;for(let E=0;E<_;E++)this._ctx.fillText(d[E],e[0],e[1]+E*n,r)}else this._ctx.fillText(t,e[0],e[1],r);y.apply(this,null,L.DEFAULT_FILTER,L.DEFAULT_COMPOSITE_OPERATION,L.DEFAULT_ALPHA)}}drawImage(t,e,i,s,r=[]){if((r==null?void 0:r.length)&&y.apply(this,null,r[0],r[1],r[2]),s){const[[a,o],[h,l]]=s;this._ctx.drawImage(t,a,o,h-a,l-a,e[0],e[1],i[0],i[1])}else this._ctx.drawImage(t,e[0],e[1],i[0],i[1]);y.apply(this,null,L.DEFAULT_FILTER,L.DEFAULT_COMPOSITE_OPERATION,L.DEFAULT_ALPHA)}drawLateImage(t,e,i,s,r=[]){this._bactchedStandalones.push(()=>{if((r==null?void 0:r.length)&&y.apply(this,null,r[0],r[1],r[2]),s){const[[a,o],[h,l]]=s;this._ctx.drawImage(t,a,o,h-a,l-a,e[0],e[1],i[0],i[1])}else this._ctx.drawImage(t,e[0],e[1],i[0],i[1]);y.apply(this,null,L.DEFAULT_FILTER,L.DEFAULT_COMPOSITE_OPERATION,L.DEFAULT_ALPHA)})}get ctx(){return this._ctx}get batchedStrokes(){return this._batchedStrokes}get batchedFills(){return this._bactchedStandalones}get batchedStandalones(){return this._batchedImages}get defaultProfile(){return this._defaultProfile}get profile1(){return this._profile1}get profile2(){return this._profile2}get profile3(){return this._profile3}get profile4(){return this._profile4}get profile5(){return this._profile5}get profiles(){return this._profiles}get defaultTextProfile(){return this._defaultTextProfile}get textProfile1(){return this._textProfile1}get textProfile2(){return this._textProfile2}get textProfile3(){return this._textProfile3}get textProfile4(){return this._textProfile4}get textProfile5(){return this._textProfile5}get textProfiles(){return this._textProfiles}get currentCtxVisuals(){return p(this,pt)}get currentCtxStyles(){return p(this,qt)}get currentCtxTextStyles(){return p(this,Wt)}set ctx(t){this._ctx=t}set defaultProfile(t){this._defaultProfile=t}set profile1(t){this._profile1=t}set profile2(t){this._profile2=t}set profile3(t){this._profile3=t}set profile4(t){this._profile4=t}set profile5(t){this._profile5=t}set profiles(t){this._profiles=t}set defaultTextProfile(t){this._defaultTextProfile=t}set textProfile1(t){this._textProfile1=t}set textProfile2(t){this._textProfile2=t}set textProfile3(t){this._textProfile3=t}set textProfile4(t){this._textProfile4=t}set textProfile5(t){this._textProfile5=t}set textProfiles(t){this._textProfiles=t}set currentCtxVisuals(t){D(this,pt,t)}set currentCtxStyles(t){D(this,qt,t)}set currentCtxTextStyles(t){D(this,Wt,t)}};pt=new WeakMap,qt=new WeakMap,Wt=new WeakMap,c(L,"PROFILE_ID_GIVER",-1),c(L,"TEXT_PROFILE_ID_GIVER",-1),c(L,"COMPOSITE_OPERATIONS",{SOURCE_OVER:"source-over",SOURCE_IN:"source-in",SOURCE_OUT:"source-out",SOURCE_ATOP:"source-atop",DESTINATION_OVER:"destination-over",DESTINATION_IN:"destination-in",DESTINATION_OUT:"destination-out",DESTINATION_ATOP:"destination-atop",LIGHTER:"lighter",COPY:"copy",XOR:"xor",MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",COLOR_BURN:"color-burn",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"}),c(L,"FILTERS",{BLUR:t=>`blur(${t}px)`,BRIGHTNESS:t=>`brightness(${t})`,CONTRAST:t=>`contrast(${t})`,DROPSHADOW:t=>`drop-shadow(${t})`,GRAYSCALE:t=>`grayscale(${t})`,HUE_ROTATE:t=>`hue-rotate(${t}deg)`,INVERT:t=>`invert(${t})`,OPACITY:t=>`opacity(${t})`,SATURATE:t=>`saturate(${t})`,SEPIA:t=>`sepia(${t})`,URL:t=>`url(${t})`}),c(L,"DEFAULT_COMPOSITE_OPERATION",L.COMPOSITE_OPERATIONS.SOURCE_OVER),c(L,"DEFAULT_FILTER","none"),c(L,"DEFAULT_ALPHA",1),c(L,"PATH_TYPES",{LINEAR:L.getLine,QUADRATIC:L.getQuadCurve,CUBIC_BEZIER:L.getBezierCurve,ARC:L.getArc,ARC_TO:L.getArcTo,ELLIPSE:L.getEllispe,RECT:L.getRect,ROUND_RECT:L.getRoundRect}),c(L,"LINE_TYPES",{LINEAR:L.getLine,QUADRATIC:L.getQuadCurve,CUBIC_BEZIER:L.getBezierCurve}),c(L,"DRAW_METHODS",{FILL:"FILL",STROKE:"STROKE"});let x=L;var Nt;const I=class I{constructor(t,e,i,s,r,n,a,o,h,l,d){S(this,Nt,null);this._id=x.TEXT_PROFILE_ID_GIVER++,this._render=t,D(this,Nt,t==null?void 0:t.ctx),this._font=e??I.DEFAULT_FONT,this._letterSpacing=i??I.DEFAULT_LETTER_SPACING,this._wordSpacing=s??I.DEFAULT_WORD_SPACING,this._fontVariantCaps=r??I.DEFAULT_FONT_VARIANT_CAPS,this._direction=n??I.DEFAULT_DIRECTION,this._fontStretch=a??I.DEFAULT_FONT_STRETCH,this._fontKerning=o??I.DEFAULT_FONT_KERNING,this._textAlign=h??I.DEFAULT_TEXT_ALIGN,this._textBaseline=l??I.DEFAULT_TEXT_BASELINE,this._textRendering=d??I.DEFAULT_TEXT_RENDERING}duplicate(t=this._render,e=this._font,i=this._letterSpacing,s=this._wordSpacing,r=this._fontVariantCaps,n=this._direction,a=this._fontStretch,o=this._fontKerning,h=this._textAlign,l=this._textBaseline,d=this._textRendering){return new I(t,e,i,s,r,n,a,o,h,l,d)}getStyles(){return[this._font,this._letterSpacing,this._wordSpacing,this._fontVariantCaps,this._direction,this._fontStretch,this._fontKerning,this._textAlign,this._textBaseline,this._textRendering]}update(t,e,i,s,r,n,a,o,h,l){return t&&(this._font=t),e&&(this._letterSpacing=typeof e=="number"?e+"px":e),i&&(this._wordSpacing=typeof i=="number"?i+"px":i),s&&(this._fontVariantCaps=s),r&&(this._direction=r),n&&(this._fontStretch=n),a&&(this._fontKerning=a),o&&(this._textAlign=o),h&&(this._textBaseline=h),l&&(this._textRendering=l),this}apply(t=this._font,e=this._letterSpacing,i=this._wordSpacing,s=this._fontVariantCaps,r=this._direction,n=this._fontStretch,a=this._fontKerning,o=this._textAlign,h=this._textBaseline,l=this._textRendering){const d=p(this,Nt),_=this._render.currentCtxTextStyles;t&&_[0]!==t&&(_[0]=d.font=t),e&&_[1]!==e&&(_[1]=d.letterSpacing=e),i&&_[2]!==i&&(_[2]=d.wordSpacing=i),s&&_[3]!==s&&(_[3]=d.fontVariantCaps=s),r&&_[4]!==r&&(_[4]=d.direction=r),n&&_[5]!==n&&(_[5]=d.fontStretch=n),a&&_[6]!==a&&(_[6]=d.fontKerning=a),o&&_[7]!==o&&(_[7]=d.textAlign=o),h&&_[8]!==h&&(_[8]=d.textBaseline=h),l&&_[9]!==l&&(_[9]=d.textRendering=l)}static apply(t,e,i,s,r,n,a,o,h,l,d){const _=[t.font,t.letterSpacing,t.wordSpacing,t.fontVariantCaps,t.direction,t.fontStretch,t.fontKerning,t.textAlign,t.textBaseline,t.textRendering];e&&_[0]!==e&&(_[0]=t.font=e),i&&_[1]!==i&&(_[1]=t.letterSpacing=i),s&&_[2]!==s&&(_[2]=t.wordSpacing=s),r&&_[3]!==r&&(_[3]=t.fontVariantCaps=r),n&&_[4]!==n&&(_[4]=t.direction=n),a&&_[5]!==a&&(_[5]=t.fontStretch=a),o&&_[6]!==o&&(_[6]=t.fontKerning=o),h&&_[7]!==h&&(_[7]=t.textAlign=h),l&&_[8]!==l&&(_[8]=t.textBaseline=l),d&&_[9]!==d&&(_[9]=t.textRendering=d)}get id(){return this.id}get render(){return this._render}get font(){return this._font}get letterSpacing(){return+this._letterSpacing.replace("px","")}get wordSpacing(){return+this._wordSpacing.replace("px","")}get fontVariantCaps(){return this._fontVariantCaps}get direction(){return this._direction}get fontStretch(){return this._fontStretch}get fontKerning(){return this._fontKerning}get textAlign(){return this._textAlign}get textBaseline(){return this._textBaseline}get textRendering(){return this._textRendering}set render(t){this._render=t,D(this,Nt,t.ctx)}set font(t){this._font=t}set letterSpacing(t){this._letterSpacing=typeof t=="number"?t+"px":t}set wordSpacing(t){this._wordSpacing=typeof t=="number"?t+"px":t}set fontVariantCaps(t){this._fontVariantCaps=t}set direction(t){this._direction=t}set fontStretch(t){this._fontStretch=t}set fontKerning(t){this._fontKerning=t}set textAlign(t){this._textAlign=t}set textBaseline(t){this._textBaseline=t}set textRendering(t){this._textRendering=t}};Nt=new WeakMap,c(I,"CAPS_VARIANTS",{NORMAL:"normal",SMALL_CAPS:"small-caps",ALL_SMALL_CAPS:"all-small-caps",PETITE_CAPS:"petite-caps",ALL_PETITE_CAPS:"all-petite-caps",UNICASE:"unicase",TILTING_CAPS:"tilting-caps"}),c(I,"DIRECTIONS",{LEFT_TO_RIGHT:"ltr",RIGHT_TO_LEFT:"rtl",INHERIT:"inherit"}),c(I,"STRETCHES",{ULTRA_CONDENSED:"ultra-condensed",EXTRA_CONDENSED:"extra-condensed",CONDENSED:"condensed",SEMI_CONDENSED:"semi-condensed",NORMAL:"normal",SEMI_EXPANDED:"semi-expanded",EXPANDED:"expanded",EXTRA_EXPANDED:"extra-expanded",ULTRA_EXPANDED:"ultra-expanded"}),c(I,"KERNINGS",{AUTO:"auto",NORMAL:"normal",NONE:"none"}),c(I,"ALIGNMENTS",{LEFT:"left",RIGTH:"normal",CENTER:"center",START:"start",END:"end"}),c(I,"BASELINES",{TOP:"top",BOTTOM:"bottom",HANGING:"hanging",MIDDLE:"middle",ALPHABETIC:"alphabetic",IDEOGRAPHIC:"ideographic"}),c(I,"RENDERINGS",{AUTO:"auto",FAST:"optimizeSpeed",LEGIBLE:"optimizeLegibility",PRECISE:"geometricPrecision"}),c(I,"DEFAULT_FONT","32px Arial"),c(I,"DEFAULT_LETTER_SPACING","2px"),c(I,"DEFAULT_WORD_SPACING","4px"),c(I,"DEFAULT_FONT_VARIANT_CAPS",I.CAPS_VARIANTS.NORMAL),c(I,"DEFAULT_DIRECTION",I.DIRECTIONS.LEFT_TO_RIGHT),c(I,"DEFAULT_FONT_STRETCH",I.STRETCHES.NORMAL),c(I,"DEFAULT_FONT_KERNING",I.KERNINGS.NORMAL),c(I,"DEFAULT_TEXT_ALIGN",I.ALIGNMENTS.CENTER),c(I,"DEFAULT_TEXT_BASELINE",I.BASELINES.MIDDLE),c(I,"DEFAULT_TEXT_RENDERING",I.RENDERINGS.FAST),c(I,"DEFAULT_PROFILE",new I(null,I.DEFAULT_FONT,I.DEFAULT_LETTER_SPACING,I.DEFAULT_WORD_SPACING,I.DEFAULT_FONT_VARIANT_CAPS,I.DEFAULT_DIRECTION,I.DEFAULT_FONT_STRETCH,I.DEFAULT_FONT_KERNING,I.DEFAULT_TEXT_ALIGN,I.DEFAULT_TEXT_BASELINE,I.DEFAULT_TEXT_RENDERING));let K=I;var Ut;const v=class v extends De{constructor(e,i,s,r,n,a,o,h,l,d){super(i);S(this,Ut,null);e&&(this.color=this.getInitColor()),this._id=x.PROFILE_ID_GIVER++,this._render=e,D(this,Ut,e==null?void 0:e.ctx),this._filter=s??x.DEFAULT_FILTER,this._compositeOperation=r??x.DEFAULT_COMPOSITE_OPERATION,this._opacity=n??x.DEFAULT_ALPHA,this._lineWidth=a??v.DEFAULT_WIDTH,this._lineDash=o??v.DEFAULT_DASH,this._lineDashOffset=h??v.DEFAULT_DASH_OFFSET,this._lineJoin=l??v.DEFAULT_JOIN,this._lineCap=d??v.DEFAULT_CAP}duplicate(e=this._render,i=this._color,s=this._filter,r=this._compositeOperation,n=this._opacity,a=this._lineWidth,o=this._lineDash,h=this._lineDashOffset,l=this._lineJoin,d=this._lineCap){return new v(e,i,s,r,n,a,o,h,l,d)}getStyles(){return[this._filter,this._compositeOperation,this._opacity,this._lineWidth,this._lineDash,this._lineDashOffset,this._lineJoin,this._lineCap]}toString(e=this._color,i=this._filter,s=this._compositeOperation,r=this._opacity,n=this._lineWidth,a=this._lineDash,o=this._lineDashOffset,h=this._lineJoin,l=this._lineCap){let d=v.SERIALIZATION_SEPARATOR,_=N.getColorValue(e);return(_ instanceof CanvasGradient||_ instanceof CanvasPattern)&&(_=e.toString()),_+d+i+d+s+d+r+d+n+d+a+d+o+d+h+d+l}fillOptimizedToString(e=this._color,i=this._filter,s=this._compositeOperation,r=this._opacity){let n=v.SERIALIZATION_SEPARATOR,a=N.getColorValue(e);return(a instanceof CanvasGradient||a instanceof CanvasPattern)&&(a=e.toString()),a+n+i+n+s+n+r}update(e,i,s,r,n,a,o,h,l){return e&&(this.color=e),i&&(this._filter=i),s&&(this._compositeOperation=s),r!=null&&(this._opacity=r),n&&(this._lineWidth=n),a&&(this._lineDash=a),o&&(this._lineDashOffset=o),h&&(this._lineJoin=h),l&&(this._lineCap=l),this}apply(e=this._color,i=this._filter,s=this._compositeOperation,r=this._opacity,n=this._lineWidth,a=this._lineDash,o=this._lineDashOffset,h=this._lineJoin,l=this._lineCap){const d=p(this,Ut),_=N.getColorValue(e),E=this._render.currentCtxStyles,T=this._render.currentCtxVisuals;if(e&&T[0]!==_&&(T[0]=d.strokeStyle=d.fillStyle=_),i&&T[1]!==i&&(T[1]=d.filter=i),s&&T[2]!==s&&(T[2]=d.globalCompositeOperation=s),r!=null&&T[3]!==r&&(T[3]=d.globalAlpha=r),n!=null&&E[0]!==n&&(E[0]=d.lineWidth=n),a){const C=a.toString();E[1]!==C&&(E[1]=C,d.setLineDash(a))}o!==null&&E[2]!==o&&(E[2]=d.lineDashOffset=o),h&&E[3]!==h&&(E[3]=d.lineJoin=h),l&&E[4]!==l&&(E[4]=d.lineCap=l)}static apply(e,i,s,r,n,a,o,h,l,d){const _=e.ctx,E=i&&N.getColorValue(i),T=e.currentCtxStyles,C=e.currentCtxVisuals;if(i&&C[0]!==E&&(C[0]=_.strokeStyle=_.fillStyle=E),s&&C[1]!==s&&(C[1]=_.filter=s),r&&C[2]!==r&&(C[2]=_.globalCompositeOperation=r),n!=null&&C[3]!==n&&(C[3]=_.globalAlpha=n),a!=null&&T[0]!==a&&(T[0]=_.lineWidth=a),o){const F=o.toString();T[1]!==F&&(T[1]=F,_.setLineDash(o))}h!==null&&T[2]!==h&&(T[2]=_.lineDashOffset=h),l&&T[3]!==l&&(T[3]=_.lineJoin=l),d&&T[4]!==d&&(T[4]=_.lineCap=d)}get id(){return this.id}get render(){return this._render}get lineWidth(){return this._lineWidth}get lineCap(){return this._lineCap}get lineJoin(){return this._lineJoin}get lineDash(){return this._lineDash}get lineDashOffset(){return this._lineDashOffset}set render(e){this._render=e,D(this,Ut,e.ctx)}set lineWidth(e){return this._lineWidth=e}set lineCap(e){return this._lineCap=e}set lineJoin(e){return this._lineJoin=e}set lineDash(e){return this._lineDash=e}set lineDashOffset(e){return this._lineDashOffset=e}};Ut=new WeakMap,c(v,"JOIN_TYPES",{MITER:"miter",BEVEL:"bevel",ROUND:"round"}),c(v,"CAP_TYPES",{BUTT:"butt",SQUARE:"square",ROUND:"round"}),c(v,"DEFAULT_WIDTH",2),c(v,"DEFAULT_CAP",v.CAP_TYPES.ROUND),c(v,"DEFAULT_JOIN",v.JOIN_TYPES.MITER),c(v,"DEFAULT_DASH",[]),c(v,"DEFAULT_DASH_OFFSET",0),c(v,"SERIALIZATION_SEPARATOR","%"),c(v,"DEFAULT_PROFILE",new v(null,N.DEFAULT_RGBA,x.DEFAULT_FILTER,x.DEFAULT_COMPOSITE_OPERATION,x.DEFAULT_ALPHA,v.DEFAULT_WIDTH,v.DEFAULT_DASH,v.DEFAULT_DASH_OFFSET,v.DEFAULT_JOIN,v.DEFAULT_CAP));let y=v;const ti=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var gt,ot,Mt,Kt,rt,yt,ft,wt,vt,Rt,U,be,Se,Te,pe,Pe,ge,Qt,fe,Tt,Vt;const O=class O{constructor(t,e,i=null,s,r,n=O.DEFAULT_CTX_SETTINGS,a=!1){S(this,U);S(this,Mt,0);S(this,Kt,0);S(this,rt,null);S(this,yt,null);S(this,ft,null);S(this,wt,[]);S(this,vt,null);S(this,Rt,[window.scrollX,window.screenY]);var h;this._cvs=t,this._frame=r??(t==null?void 0:t.parentElement),this._cvs.setAttribute(O.DEFAULT_CVSDE_ATTR,!0),this._frame.setAttribute(O.DEFAULT_CVSFRAMEDE_ATTR,!0),this._ctx=this._cvs.getContext("2d",{willReadFrequently:a}),this._settings=this.updateSettings(n),this._els={refs:[],defs:[]},this._looping=!1,this._loopingCB=e,this.fpsLimit=i,this.visibilityChangeCB=s,this._speedModifier=1,D(this,rt,R(this,U,ge).call(this,i)),this._deltaTime=null,this._fixedTimeStamp=null,this._windowListeners=R(this,U,Se).call(this),this._viewPos=[0,0];const o=((h=this._frame)==null?void 0:h.getBoundingClientRect())??{width:O.DEFAULT_CANVAS_WIDTH,height:O.DEFAULT_CANVAS_HEIGHT};this.setSize(o.width,o.height),R(this,U,be).call(this),this._typingDevice=new je,this._mouse=new Ae,this._offset=this.updateOffset(),this._render=new x(this._ctx)}static addOnLoadCallback(t){u.isFunction(t)&&p(O,gt)&&p(O,gt).push(t)}static addOnFirstInteractCallback(t){u.isFunction(t)&&p(O,ot)&&p(O,ot).push(t)}static loadSVGFilter(t,e){let i=document.getElementById(O.DEFAULT_CUSTOM_SVG_FILTER_CONTAINER_ID),s=new DOMParser().parseFromString(t,"text/html").body.firstChild,r=s.querySelector("filter"),n=document.createElement("div");return e?r.id=e:e=r.id,n.id=O.DEFAULT_CUSTOM_SVG_FILTER_ID_PREFIX+e,n.appendChild(s),i||(i=document.createElement("div"),i.id=O.DEFAULT_CUSTOM_SVG_FILTER_CONTAINER_ID,document.head.appendChild(i)),i.appendChild(n),O.LOADED_SVG_FILTERS[e]=[...r.children],e}static getSVGFilter(t){return O.LOADED_SVG_FILTERS[t]}static removeSVGFilter(t){t=O.DEFAULT_CUSTOM_SVG_FILTER_ID_PREFIX+t,document.getElementById(t).remove(),delete O.LOADED_SVG_FILTERS[t]}updateOffset(){const{width:t,height:e,x:i,y:s}=this._cvs.getBoundingClientRect();return this._offset={x:Math.round(i+t-this.width)+this._viewPos[0],y:Math.round(s+e-this.height)+this._viewPos[1]}}startLoop(){this._looping||(this._looping=!0,R(this,U,Te).call(this,0))}stopLoop(){this._looping=!1}updateCachedAllEls(){const t=[];t.push(...this.refs),this._els.refs.forEach(e=>t.push(...e.asSource)),t.push(...this._els.defs),D(this,wt,t),D(this,vt,t.length)}draw(){const t=p(this,wt),e=p(this,vt),i=this._render,s=this._deltaTime,r=this.timeStamp*this._speedModifier,n=O.DEFAULT_CANVAS_ACTIVE_AREA_PADDING;for(let a=0;a<e;a++){const o=t[a];(o.alwaysActive||!o.initialized||this.isWithin(o.pos,n))&&o.draw&&o.draw(i,r,s)}}clear(t=0,e=0,i=this.width,s=this.height){const[r,n]=this._viewPos;r||n?(this.save(),this.resetTransformations(),this._ctx.clearRect(t,e,i,s),this.restore()):this._ctx.clearRect(t,e,i,s)}initializeStatic(){this.fpsLimit=0,this.draw(),this.drawStatic();const t=this.getObjs(Q),e=t.length;for(let i=0;i<e;i++){const s=t[i];if(s.setupCB===null)s.setupCB=r=>r.draw(this.render,this.timeStamp*this._speedModifier,this._deltaTime);else if(u.isFunction(s.setupCB)){const r=s.setupCB;s.setupCB=(n,a)=>{n.draw(this.render,this.timeStamp*this._speedModifier,this._deltaTime),r(n,a)}}}}drawStatic(){this.draw(),this._render.drawBatched(),u.isFunction(this._loopingCB)&&this._loopingCB()}cleanDrawStatic(){this.clear(),this.drawStatic()}resetReferences(){this.refs.filter(t=>t.fragile).forEach(t=>t.reset())}resetTransformations(){this.ctx.setTransform(1,0,0,1,0,0)}moveViewBy(t){let[e,i]=t;this._ctx.translate(e=u.isDefined(e)&&isFinite(e)?e:0,i=u.isDefined(i)&&isFinite(i)?i:0),this._viewPos=[this._viewPos[0]+e,this._viewPos[1]+i],this.updateOffset(),this._mouse.updatePos({x:this._mouse.rawX,y:this._mouse.rawY},this._offset),R(this,U,Tt).call(this)}moveViewAt(t){let[e,i]=t;this.resetTransformations(),this._ctx.translate(e=u.isDefined(e)&&isFinite(e)?e:0,i=u.isDefined(i)&&isFinite(i)?i:0),this._viewPos=[e,i],this.updateOffset(),this._mouse.updatePos({x:this._mouse.rawX,y:this._mouse.rawY},this._offset),R(this,U,Tt).call(this)}setSize(t,e,i){const{width:s,height:r}=this._frame.getBoundingClientRect(),n=t??s,a=e??r;this._cvs.width===n&&this._cvs.width===a||(this._cvs.width=n??s,this._cvs.height=a??r,i&&(this._frame.style.width=this.width+"px",this._frame.style.height=this.height+"px"),this.updateSettings(),this.updateOffset())}updateSettings(t){const e=t||this._settings;return Object.entries(e).forEach(i=>this._ctx[i[0]]=i[1]),this._settings=e}add(t,e=!1){const i=t&&(t.length??1);for(let s=0;s<i;s++){const r=t[s]??t;r._parent=this,u.isFunction(r.initialize)&&r.initialize(),e||this._els[r.asSource?"refs":"defs"].push(r)}this.updateCachedAllEls()}remove(t){t=="*"?this._els={refs:[],defs:[]}:(this._els.defs=this._els.defs.filter(e=>e.id!==t),this._els.refs=this._els.refs.filter(e=>e.id!==t)),this.updateCachedAllEls()}get(t){const e=p(this,wt),i=p(this,vt);for(let s=0;s<i;s++){const r=e[s];if(r.id==t)return r}return null}getObjs(t){return this._els.defs.filter(e=>e instanceof t)}save(){this._ctx.save()}restore(){this._ctx.restore()}setMouseMove(t,e){const i=n=>{this._mouse.updatePos(n,this._offset),this._mouse.calcAngle(),R(this,U,Tt).call(this,t,n)},s=n=>{const a=n.touches;a.length==1&&(n.preventDefault(),n.x=u.round(a[0].clientX,1),n.y=u.round(a[0].clientY,1),this._mouse.updatePos(n,this._offset),this._mouse.calcAngle(),R(this,U,Tt).call(this,t,n))},r=e?document:this._frame;return r.addEventListener("mousemove",i),r.addEventListener("touchmove",s),()=>{r.removeEventListener("mousemove",i),r.removeEventListener("touchmove",s)}}setMouseLeave(t,e){const i=r=>{this._mouse.invalidate(),R(this,U,Tt).call(this,t,r)},s=e?document:this._frame;return s.addEventListener("mouseleave",i),()=>s.removeEventListener("mouseleave",i)}setMouseDown(t,e){let i=!1;const s=a=>{i=!0;const o=a.touches;o.length==1&&(a.preventDefault(),a.x=u.round(o[0].clientX,1),a.y=u.round(o[0].clientY,1),a.button=0,R(this,U,Vt).call(this,t,a))},r=a=>{i||R(this,U,Vt).call(this,t,a),i=!1},n=e?document:this._frame;return n.addEventListener("touchstart",s),n.addEventListener("mousedown",r),()=>{n.removeEventListener("touchstart",s),n.removeEventListener("mousedown",r)}}setMouseUp(t,e){let i=!1;const s=a=>{i=!0;const o=a.changedTouches;a.touches.length||(a.preventDefault(),a.x=u.round(o[0].clientX,1),a.y=u.round(o[0].clientY,1),a.button=0,R(this,U,Vt).call(this,t,a))},r=a=>{i||R(this,U,Vt).call(this,t,a),i=!1},n=e?document:this._frame;return n.addEventListener("touchend",s),n.addEventListener("mouseup",r),()=>{n.removeEventListener("touchend",s),n.removeEventListener("mouseup",r)}}setKeyDown(t,e){const i=r=>{this._typingDevice.setDown(r),u.isFunction(t)&&t(this._typingDevice,r)},s=e?document:this._frame;return s.addEventListener("keydown",i),document.addEventListener("keydown",r=>{var n;p(O,ot)&&R(n=O,Qt,fe).call(n,r)}),()=>s.removeEventListener("keydown",i)}setKeyUp(t,e){const i=r=>{this._typingDevice.setUp(r),u.isFunction(t)&&t(this._typingDevice,r)},s=e?document:this._frame;return s.addEventListener("keyup",i),()=>s.removeEventListener("keyup",i)}getCenter(){return[this.width/2,this.height/2]}isWithin(t,e=0){const[i,s]=t,[r,n]=this._viewPos;return i>=-e-r&&i<=this.width+e-r&&s>=-e-n&&s<=this.height+e-n}get cvs(){return this._cvs}get frame(){return this._frame}get ctx(){return this._ctx}get width(){return this._cvs.width}get height(){return this._cvs.height}get settings(){return this._settings}get loopingCB(){return this._loopingCB}get looping(){return this._looping}get deltaTime(){return this._deltaTime}get windowListeners(){return this._windowListeners}get timeStamp(){return this._fixedTimeStamp||p(this,ft)}get timeStampRaw(){return p(this,ft)}get els(){return this._els}get mouse(){return this._mouse}get typingDevice(){return this._typingDevice}get keyboard(){return this._typingDevice}get offset(){return this._offset}get defs(){return this._els.defs}get refs(){return this._els.refs}get allDefsAndRefs(){return this.defs.concat(this.refs)}get allEls(){return this.allDefsAndRefs.flatMap(t=>t.dots||t)}get fpsLimitRaw(){return this._fpsLimit}get fpsLimit(){const t=!isFinite(this._fpsLimit);return this._fpsLimit==null||t?t?"static":null:1/(this._fpsLimit/1e3)}get visibilityChangeCB(){return this._visibilityChangeCB}get maxTime(){return p(this,rt)}get viewPos(){return this._viewPos}get render(){return this._render}get speedModifier(){return this._speedModifier}set loopingCB(t){this._loopingCB=t}set width(t){this.setSize(t,null)}set height(t){this.setSize(null,t)}set offset(t){this._offset=t}set fpsLimit(t){this._fpsLimit=u.isDefined(t)&&isFinite(t)?1e3/Math.max(t,0):null,D(this,rt,R(this,U,ge).call(this,t))}set visibilityChangeCB(t){this._visibilityChangeCB=(e,i,s)=>{e&&this.resetReferences(),u.isFunction(t)&&t(e,i,s)}}set speedModifier(t){this._speedModifier=t}};gt=new WeakMap,ot=new WeakMap,Mt=new WeakMap,Kt=new WeakMap,rt=new WeakMap,yt=new WeakMap,ft=new WeakMap,wt=new WeakMap,vt=new WeakMap,Rt=new WeakMap,U=new WeakSet,be=function(){const t=document.createElement("style");t.appendChild(document.createTextNode(`[${O.DEFAULT_CVSFRAMEDE_ATTR}]{position:relative !important;outline: none;}canvas[${O.DEFAULT_CVSDE_ATTR}]{${Object.entries(O.DEFAULT_CANVAS_STYLES).reduce((e,i)=>e+`${i[0]}:${i[1]};`,"")}}`)),this._cvs.appendChild(t),this._frame.setAttribute("tabindex",0)},Se=function(){const t=()=>this.setSize(),e=r=>this._visibilityChangeCB(!document.hidden,this,r),i=()=>{const r=window.scrollX,n=window.scrollY;this.updateOffset(),this._mouse.updatePos({x:this._mouse.x+(r-p(this,Rt)[0]),y:this._mouse.y+(n-p(this,Rt)[1])},{x:0,y:0}),R(this,U,Tt).call(this),p(this,Rt)[0]=r,p(this,Rt)[1]=n},s=r=>{const n=p(O,gt),a=n==null?void 0:n.length;if(a)for(let o=0;o<a;o++)n[o](r);D(O,gt,null)};return window.addEventListener("resize",t),window.addEventListener("visibilitychange",e),window.addEventListener("scroll",i),window.addEventListener("load",s),{onrezise:()=>window.removeEventListner("resize",t),onvisibilitychange:()=>window.removeEventListener("visibilitychange",e),onscroll:()=>window.removeEventListener("scroll",i),onDOMContentLoaded:()=>window.removeEventListener("load",s)}},Te=function(t){if(D(this,ft,t),this._fpsLimit){const e=t-p(this,Kt);e>=this._fpsLimit&&(R(this,U,pe).call(this,t),D(this,Mt,t),D(this,Kt,t-e%this._fpsLimit))}else R(this,U,pe).call(this,t),D(this,Mt,t);this._looping&&ti(R(this,U,Te).bind(this))},pe=function(t){R(this,U,Pe).call(this,t);const e=Math.abs(t-p(this,ft)-1e3*this.deltaTime);this._fixedTimeStamp==0&&(this._fixedTimeStamp=t-p(this,yt)),t&&this._fixedTimeStamp&&e<p(this,rt)?(this._mouse.calcSpeed(this._deltaTime),this.clear(),this.draw(),this._render.drawBatched(),u.isFunction(this._loopingCB)&&this._loopingCB(),this._fixedTimeStamp=0):t&&(this._fixedTimeStamp=t-D(this,yt,p(this,yt)+p(this,rt)),D(this,yt,p(this,yt)+p(this,rt)))},Pe=function(t=0){this._deltaTime=Math.min((t-p(this,Mt))/1e3,p(this,rt))},ge=function(t){return t?t<7?(1.05*(14-t))**3*O.DEFAULT_MAXDELAY_MULTIPLIER:Math.max((360-t)*O.DEFAULT_MAXDELAY_MULTIPLIER,50):O.DEFAULT_MAX_DELTATIME_MS},Qt=new WeakSet,fe=function(t){if(t.type!=="keydown"||t.type=="keydown"&&t.key.length==1){const e=p(O,ot),i=e==null?void 0:e.length;if(i)for(let s=0;s<i;s++)e[s](t);D(O,ot,null)}},Tt=function(t,e){const i=this.refs.length;for(let s=0;s<i;s++){const r=this.refs[s];r.ratioPosCB||r.ratioPosCB===!1||(r.ratioPos=this._mouse.pos)}u.isFunction(t)&&t(this._mouse,e),this._mouse.checkValid()},Vt=function(t,e){var i;this._mouse.setMouseClicks(e),u.isFunction(t)&&t(this._mouse,e),p(O,ot)&&R(i=O,Qt,fe).call(i,e)},S(O,Qt),c(O,"DOMParser",new DOMParser),c(O,"ELEMENT_ID_GIVER",0),c(O,"DEFAULT_MAX_DELTATIME_MS",130),c(O,"DEFAULT_MAX_DELTATIME",O.DEFAULT_MAX_DELTATIME_MS/1e3),c(O,"DEFAULT_MAXDELAY_MULTIPLIER",.44),c(O,"DEFAULT_CANVAS_ACTIVE_AREA_PADDING",20),c(O,"DEFAULT_CVSDE_ATTR","_CVSDE"),c(O,"DEFAULT_CVSFRAMEDE_ATTR","_CVSDE_F"),c(O,"DEFAULT_CUSTOM_SVG_FILTER_ID_PREFIX","CDE_FE_"),c(O,"DEFAULT_CUSTOM_SVG_FILTER_CONTAINER_ID",O.DEFAULT_CUSTOM_SVG_FILTER_ID_PREFIX+"CONTAINER"),c(O,"LOADED_SVG_FILTERS",{}),c(O,"DEFAULT_CTX_SETTINGS",{imageSmoothingEnabled:!1,willReadFrequently:!1,font:K.DEFAULT_FONT,letterSpacing:K.DEFAULT_LETTER_SPACING,wordSpacing:K.DEFAULT_WORD_SPACING,fontVariantCaps:K.DEFAULT_FONT_VARIANT_CAPS,direction:K.DEFAULT_DIRECTION,fontSretch:K.DEFAULT_FONT_STRETCH,fontKerning:K.DEFAULT_FONT_KERNING,textAlign:K.DEFAULT_TEXT_ALIGN,textBaseline:K.DEFAULT_TEXT_BASELINE,textRendering:K.DEFAULT_TEXT_RENDERING,lineDashOffset:y.DEFAULT_DASH_OFFSET,lineJoin:y.DEFAULT_JOIN,lineCap:y.DEFAULT_CAP,lineWidth:y.DEFAULT_WIDTH,fillStyle:N.DEFAULT_COLOR,stokeStyle:N.DEFAULT_COLOR}),c(O,"DEFAULT_CANVAS_WIDTH",800),c(O,"DEFAULT_CANVAS_HEIGHT",800),c(O,"DEFAULT_CANVAS_STYLES",{position:"absolute",width:"100%",height:"100%","background-color":"transparent",border:"none",outline:"none","pointer-events":"none !important","z-index":0,padding:"0 !important",margin:"0","-webkit-transform":"translate3d(0, 0, 0)","-moz-transform":"translate3d(0, 0, 0)","-ms-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)"}),c(O,"STATIC_MODE",0),S(O,gt,[]),S(O,ot,[]);let nt=O;var re;const b=class b{constructor(t,e,i,s){this._id=ce(b,re)._++,this._animation=t,this._duration=e??b.DEFAULT_DURATION,this._easing=i||b.linear,this._endCallback=s,this._startTime=null,this._progress=0,this._playCount=0}getFrame(t,e){const i=this._duration<0,s=i?-this._duration:this._duration;this._playCount&&!i||(this._startTime?t<this._startTime+s?(this._progress=this._easing((t-this._startTime)/s),this._animation(this._progress,this._playCount,e,this.progress)):i?this.reset(!0,e):this.end(e):this._startTime=t)}end(t){this._animation(1,this._playCount++,t,1),u.isFunction(this._endCallback)&&this._endCallback()}reset(t,e){t?this._animation(1,this._playCount++,e,1):this._playCount=0,this._progress=0,this._startTime=null}get id(){return this._id}get animation(){return this._animation}get duration(){return this._duration}get easing(){return this._easing}get endCallback(){return this._endCallback}get startTime(){return this._startTime}get progress(){return u.clamp(this._progress,0,1)}get progressRaw(){return this._progress}get playCount(){return this._playCount}set animation(t){return this._animation=t}set duration(t){return this._duration=t}set easing(t){return this._easing=t}set endCallback(t){return this._endCallback=t}};re=new WeakMap,S(b,re,0),c(b,"DEFAULT_DURATION",1e3),c(b,"easeInSine",t=>1-Math.cos(t*Math.PI/2)),c(b,"easeOutSine",t=>Math.sin(t*Math.PI/2)),c(b,"easeInOutSine",t=>-(Math.cos(Math.PI*t)-1)/2),c(b,"easeInCubic",t=>t*t*t),c(b,"easeOutCubic",t=>1-Math.pow(1-t,3)),c(b,"easeInOutCubic",t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2),c(b,"easeInQuint",t=>t*t*t*t*t),c(b,"easeOutQuint",t=>1-Math.pow(1-t,5)),c(b,"easeInOutQuint",t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2),c(b,"easeInCirc",t=>1-Math.sqrt(1-Math.pow(t,2))),c(b,"easeOutCirc",t=>Math.sqrt(1-Math.pow(t-1,2))),c(b,"easeInOutCirc",t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2),c(b,"easeInElastic",t=>t==0?0:t==1?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*(2*Math.PI/3))),c(b,"easeOutElastic",t=>t==0?0:t==1?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*(2*Math.PI/3))+1),c(b,"easeInOutElastic",t=>t==0?0:t==1?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5)/2+1),c(b,"easeInQuad",t=>t*t),c(b,"easeOutQuad",t=>1-(1-t)*(1-t)),c(b,"easeInOutQuad",t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2),c(b,"easeInQuart",t=>t*t*t*t),c(b,"easeOutQuart",t=>1-Math.pow(1-t,4)),c(b,"easeInOutQuart",t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2),c(b,"easeInExpo",t=>t==0?0:Math.pow(2,10*t-10)),c(b,"easeOutExpo",t=>t==1?1:1-Math.pow(2,-10*t)),c(b,"easeInOutExpo",t=>t==0?0:t==1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2),c(b,"easeInBack",t=>2.70158*t*t*t-1.70158*t*t),c(b,"easeOutBack",t=>1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)),c(b,"easeInOutBack",t=>t<.5?Math.pow(2*t,2)*(7.189819*t-2.5949095)/2:(Math.pow(2*t-2,2)*(3.5949095*(2*t-2)+2.5949095)+2)/2),c(b,"easeInBounce",t=>1-b.easeOutBounce(1-t)),c(b,"easeOutBounce",t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375),c(b,"easeInOutBounce",t=>t<.5?(1-b.easeOutBounce(1-2*t))/2:(1+b.easeOutBounce(2*t-1))/2),c(b,"linear",t=>t);let Y=b;var ht;const j=class j extends De{constructor(e,i,s,r,n,a){super(i);S(this,ht,[0,0]);this._id=nt.ELEMENT_ID_GIVER++,this._initPos=e||[0,0],this._pos=[0,0],this._setupCB=s??null,this._loopCB=r,this._setupResults=null,this._anchorPos=n,this._alwaysActive=a??null,this._parent=null,this._rotation=0,this._scale=[1,1],this._anims={backlog:[],currents:[]},this._visualEffects=null,this._initialized=!1}initialize(){this._pos=this.getInitPos()||j.DEFAULT_POS,this.color=this.getInitColor(),this.setAnchoredPos(),u.isFunction(this._setupCB)&&(this._setupResults=this._setupCB(this,this.parent))}draw(e,i){this.setAnchoredPos();const s=this._loopCB;s&&s(this);let r=this._anims.currents;this._anims.backlog[0]&&(r=[...r,this._anims.backlog[0]]);const n=r.length;if(n)for(let a=0;a<n;a++)r[a].getFrame(e,i)}getInitColor(){return u.isFunction(this._initColor)?this._initColor(this.render??this.parent.render,this):this._initColor||null}getInitPos(){return u.isFunction(this._initPos)?u.unlinkArr2(this._initPos(this._parent instanceof nt?this:this._parent,this)):u.unlinkArr2(this.adjustPos(this._initPos))}setAnchoredPos(){const e=this.hasAnchorPosChanged;if(e){const[i,s]=e;this.relativeX+=i-p(this,ht)[0],this.relativeY+=s-p(this,ht)[1],D(this,ht,e)}}moveAt(e){const[i,s]=e;u.isDefined(i)&&isFinite(i)&&(this.x=i),u.isDefined(s)&&isFinite(s)&&(this.y=s)}moveBy(e){const[i,s]=e;u.isDefined(i)&&isFinite(i)&&(this.x+=i),u.isDefined(s)&&isFinite(s)&&(this.y+=s)}moveTo(e,i,s,r,n,a){i??(i=1e3),s??(s=Y.easeInOutQuad),r??(r=this.pos_),n??(n=!0),a??(a=!0);const[o,h]=r,[l,d]=this.adjustPos(e),_=l-o,E=d-h;return this.playAnim(new Y(T=>{this.x=o+_*T,this.y=h+E*T},i,s),n,a)}rotateBy(e){this._rotation=(this._rotation+e)%360}rotateAt(e){this._rotation=e%360}rotateTo(e,i=1e3,s=Y.easeInOutQuad,r=!1,n=!1){const a=this._rotation,o=e-this._rotation;return this.playAnim(new Y(h=>this.rotateAt(a+o*h),i,s),r,n)}scaleBy(e){let[i,s]=e;u.isDefined(i)||(i=this._scale[0]),u.isDefined(s)||(s=this._scale[1]),this._scale[0]*=i,this._scale[1]*=s}scaleAt(e){this.scale=e}scaleTo(e,i=1e3,s=Y.easeInOutQuad,r=this.pos,n=!1,a=!1){const o=u.unlinkArr2(this._scale),h=e[0]-o[0],l=e[1]-o[1];return this.playAnim(new Y(d=>this.scaleAt([o[0]+h*d,o[1]+l*d],r),i,s),n,a)}follow(e,i,s,r){let[n,a]=this._pos,o=r.length-1;this.playAnim(new Y(h=>{let l=null;h<0&&(h=0);for(let E=o;E>=0;E--){let T=r[E];if(T[0]<=h){l=T;break}}const[d,_]=l[1](h,h-l[0],this,n,a);this.moveAt([n+d,a+_]),u.isFunction(s)&&s(h,this)},e,i))}addForce(e,i,s=1e3,r=Y.easeInOutQuad,n=!0,a=!0){let o=u.toRad(i),h=this.x,l=this.y,d=u.getAcceptableDiff(e*Math.cos(o),u.DEFAULT_ACCEPTABLE_DIFFERENCE),_=u.getAcceptableDiff(e*Math.sin(o),u.DEFAULT_ACCEPTABLE_DIFFERENCE);return this.playAnim(new Y(E=>{this.x=h+d*E,this.y=l-_*E},s,r),n,a)}playAnim(e,i,s){i&&this.currentBacklogAnim&&s&&(this.currentBacklogAnim.end(),u.addAt(this._anims.backlog,e,0));const r=e.endCallback;return e.endCallback=()=>{i?this._anims.backlog.shift():this._anims.currents=this._anims.currents.filter(n=>n.id!==e.id),u.isFunction(r)&&r()},this._anims[i?"backlog":"currents"].push(e),e}clearAnims(){this._anims.backlog=[],this._anims.currents=[]}adjustPos(e){let[i,s]=e;return u.isDefined(i)||(i=this.x??0),u.isDefined(s)||(s=this.y??0),[i,s]}remove(){this._parent.remove(this._id)}get id(){return this._id}get x(){return this._pos[0]}get y(){return this._pos[1]}get pos(){return this._pos}get pos_(){return u.unlinkArr2(this._pos)}get relativeX(){return this.x-this.anchorPos[0]}get relativeY(){return this.y-this.anchorPos[1]}get relativePos(){return[this.relativeX,this.relativeY]}get stringPos(){return this.x+","+this.y}get initPos(){return this._initPos}get currentBacklogAnim(){return this._anims.backlog[0]}get anims(){return this._anims}get setupCB(){return this._setupCB}get loopCB(){return this._loopCB}get loopingCB(){return this._loopCB}get setupResults(){return this._setupResults}get initialized(){return this._initialized}get alwaysActive(){return this._alwaysActive}get anchorPosRaw(){return this._anchorPos}get anchorPos(){var e;if(Array.isArray(this._anchorPos))return this._anchorPos;if(!this._anchorPos)return this.parent instanceof nt?[0,0]:(e=this.parent)==null?void 0:e.pos_;if(this._anchorPos instanceof j)return this._anchorPos.pos_;if(u.isFunction(this._anchorPos)){const i=this._anchorPos(this,this.parent);return u.unlinkArr2((i==null?void 0:i.pos_)||i||[0,0])}}get lastAnchorPos(){return p(this,ht)}get hasAnchorPosChanged(){const e=this.anchorPos;return!u.arr2Equals(p(this,ht),e)&&e}get parent(){return this._parent}get rotation(){return this._rotation}get scale(){return this._scale}get visualEffects(){return this._visualEffects??[]}get visualEffects_(){const e=this._visualEffects;return e?u.unlinkArr3(e):[]}get filter(){var e;return((e=this._visualEffects)==null?void 0:e[0])??x.DEFAULT_FILTER}get compositeOperation(){var e;return((e=this._visualEffects)==null?void 0:e[1])??x.DEFAULT_COMPOSITE_OPERATION}get opacity(){var e;return((e=this._visualEffects)==null?void 0:e[2])??x.DEFAULT_ALPHA}set x(e){this._pos[0]=u.round(e,j.POSITION_PRECISION)}set y(e){this._pos[1]=u.round(e,j.POSITION_PRECISION)}set pos(e){this.x=e[0],this.y=e[1]}set relativeX(e){this.x=this.anchorPos[0]+e}set relativeY(e){this.y=this.anchorPos[1]+e}set relativePos(e){this.relativeX=u.round(e[0],j.POSITION_PRECISION),this.relativeY=u.round(e[1],j.POSITION_PRECISION)}set initPos(e){this._initPos=e}set setupCB(e){this._setupCB=e}set loopCB(e){this._loopCB=e}set loopingCB(e){this._loopCB=e}set setupResults(e){this._setupResults=e}set initialized(e){this._initialized=e}set alwaysActive(e){this._alwaysActive=e}set anchorPos(e){this.anchorPosRaw=e}set anchorPosRaw(e){this._anchorPos=e}set lastAnchorPos(e){D(this,ht,e)}set rotation(e){this._rotation=e%360}set scale(e){let[i,s]=e;u.isDefined(i)||(i=this._scale[0]),u.isDefined(s)||(s=this._scale[1]),this._scale[0]=i,this._scale[1]=s}set visualEffects(e){this._visualEffects=e!=null&&e.length?u.unlinkArr3(e):null}set filter(e){const i=this._visualEffects;i?i[0]=e:this._visualEffects=[e]}set compositeOperation(e){const i=this._visualEffects;i?i[1]=e:this._visualEffects=[,e]}set opacity(e){const i=this._visualEffects;i?i[2]=e:this._visualEffects=[,,e]}};ht=new WeakMap,c(j,"DEFAULT_POS",[0,0]),c(j,"ABSOLUTE_ANCHOR",[0,0]),c(j,"POSITION_PRECISION",4);let $=j;var Et,Ct,Ot,at,te,Fe,me;const f=class f extends ${constructor(e,i,s,r,n,a,o,h,l,d,_,E){super(i,s,l,d,_,E);S(this,Et,null);S(this,Ct,null);S(this,Ot,null);this._source=e??"",this._binCB=r??f.DEFAULT_BINCB,this._sampleCount=n??f.DEFAULT_SAMPLE_COUNT,this._disableAudio=a??!1,this._offsetPourcent=o??0,this._errorCB=h,this._audioCtx=new AudioContext,nt.addOnFirstInteractCallback(()=>this._audioCtx.resume()),this._audioAnalyser=this._audioCtx.createAnalyser(),this._gainNode=this._audioCtx.createGain(),this._biquadFilterNode=this._audioCtx.createBiquadFilter(),this._biquadFilterNode.type=f.BIQUAD_FILTER_TYPES.DEFAULT,this._convolverNode=this._audioCtx.createConvolver(),this._waveShaperNode=this._audioCtx.createWaveShaper(),this._dynamicsCompressorNode=this._audioCtx.createDynamicsCompressor(),this._pannerNode=this._audioCtx.createPanner(),this._delayNode=this._audioCtx.createDelay(f.MAX_DELAY_TIME),D(this,Ot,this._audioAnalyser.fftSize=Math.max(32,2**Math.round(Math.log2(2*this._sampleCount)))),D(this,Et,this._audioAnalyser.frequencyBinCount),D(this,Ct,new Uint8Array(p(this,Et)))}initialize(){this.initializeSource(),this._pos=this.getInitPos()||$.DEFAULT_POS,this.setAnchoredPos()}draw(e,i,s){if(this.initialized){const r=e.ctx,n=this.x,a=this.y,o=this._scale[0]!==1||this._scale[1]!==1,h=this._rotation||o,l=p(this,Ct);h&&(r.translate(n,a),this._rotation&&r.rotate(u.toRad(this._rotation)),o&&r.scale(this._scale[0],this._scale[1]),r.translate(-n,-a)),this._audioAnalyser.getByteFrequencyData(l);let d=this.pos_,_=null,E=this._offsetPourcent%1*(p(this,Ot)/2),T=Math.round(.49+this._sampleCount)-E,C=-E,F=E|0;for(;C<T;C++,F=(F+1)%this._sampleCount){const w=l[F],m=this._binCB(e,w/128,d,this,_,F,this._sampleCount,w),Z=m==null?void 0:m[0],W=m==null?void 0:m[1];Z&&(d=Z),W&&(_=W)}h&&r.setTransform(1,0,0,1,0,0)}super.draw(i,s)}initializeSource(e=this._source){f.initializeDataSource(e,(i,s)=>{this._source=i,s?(i.oninactive=r=>{u.isFunction(this._errorCB)&&this._errorCB(f.ERROR_TYPES.SOURCE_DISCONNECTED,r)},this._source=this._audioCtx.createMediaStreamSource(i),this._source.connect(this._gainNode)):this._audioCtx.createMediaElementSource(i).connect(this._gainNode),this._gainNode.connect(this._biquadFilterNode),this._biquadFilterNode.connect(this._waveShaperNode),this._waveShaperNode.connect(this._dynamicsCompressorNode),this._dynamicsCompressorNode.connect(this._pannerNode),this._pannerNode.connect(this._delayNode),this._delayNode.connect(this._audioAnalyser),this._disableAudio||this._audioAnalyser.connect(this._audioCtx.destination),this._initialized=!0,u.isFunction(this._setupCB)&&(this._setupResults=this._setupCB(this,this._parent,this._source))},this._errorCB)}static initializeDataSource(e,i,s){var n,a,o,h,l;const r=f.SOURCE_TYPES;if(typeof e==r.FILE_PATH){const d=e.split(".")[e.split(".").length-1];f.SUPPORTED_AUDIO_FORMATS.includes(d)?R(n=f,at,te).call(n,f.loadAudio(e),i,s):Q.SUPPORTED_VIDEO_FORMATS.includes(d)&&R(a=f,at,te).call(a,Q.loadVideo(e),i,s)}else e.toString()==r.DYNAMIC?e.type==r.MICROPHONE?R(o=f,at,Fe).call(o,e.settings,i,s):e.type==r.SCREEN_AUDIO&&R(h=f,at,me).call(h,e.settings,i,s):e instanceof r.VIDEO||e instanceof r.AUDIO?R(l=f,at,te).call(l,e,i,s):e instanceof MediaStream&&(e.getAudioTracks().length&&u.isFunction(i)?i(e,!0):u.isFunction(s)&&s(f.ERROR_TYPES.NO_AUDIO_TRACK))}static loadAudio(e,i=!0,s=!0){const r=new Audio(e);return r.preload="auto",r.loop=i,s&&(r.autoplay=s,Q.playMedia(r)),r}static loadMicrophone(e,i,s,r,n,a,o){return e??(e=f.DEFAULT_MICROPHONE_AUTO_GAIN_CONTROL),i??(i=f.DEFAULT_MICROPHONE_ECHO_CANCELLATION),s??(s=f.DEFAULT_MICROPHONE_NOISE_SUPPRESSION),r??(r=!0),n??(n=f.DEFAULT_MICROPHONE_DELAY),a??(a=f.DEFAULT_MICROPHONE_SAMPLE_RATE),o??(o=f.DEFAULT_MICROPHONE_SAMPLE_SIZE),{type:f.SOURCE_TYPES.MICROPHONE,settings:{autoGainControl:e,channelCount:r?2:1,echoCancellation:i,latency:n,noiseSuppression:s,sampleRate:a,sampleSize:o}}}static loadScreenAudio(e,i,s,r,n,a,o){return e??(e=f.DEFAULT_MICROPHONE_AUTO_GAIN_CONTROL),i??(i=f.DEFAULT_MICROPHONE_ECHO_CANCELLATION),s??(s=f.DEFAULT_MICROPHONE_NOISE_SUPPRESSION),r??(r=!0),n??(n=f.DEFAULT_MICROPHONE_DELAY),a??(a=f.DEFAULT_MICROPHONE_SAMPLE_RATE),o??(o=f.DEFAULT_MICROPHONE_SAMPLE_SIZE),{type:f.SOURCE_TYPES.SCREEN_AUDIO,settings:{autoGainControl:e,channelCount:r?2:1,echoCancellation:i,latency:n,noiseSuppression:s,sampleRate:a,sampleSize:o}}}static getDistortionCurve(e){if(!e)return null;let i=new Float32Array(44100),s=0;for(;s<44100;s++){const r=2*s/44100-1;i[s]=(3+e)*r*20*u.TO_DEGREES/(Math.PI+e*Math.abs(r))}return i}connectConvolver(){this._biquadFilterNode.disconnect(0),this._biquadFilterNode.connect(this._convolverNode),this._convolverNode.connect(this._dynamicsCompressorNode)}disconnectConvolver(){this._biquadFilterNode.disconnect(0),this._biquadFilterNode.connect(this._dynamicsCompressorNode)}loadImpulseResponse(e,i=s=>{this.setReverb(s),this.connectConvolver()}){fetch(e).then(s=>s.arrayBuffer()).then(s=>this._audioCtx.decodeAudioData(s)).then(s=>{f.LOADED_IR_BUFFERS.push(s),u.isFunction(i)&&i(s)})}setVolume(e=1){this._gainNode.gain.value=e}setBiquadFilterType(e=f.BIQUAD_FILTER_TYPES.DEFAULT){this._biquadFilterNode.type=e}setDistortionCurve(e=null){this._waveShaperNode.curve=typeof e=="number"?f.getDistortionCurve(e):e}setOriginPos(e=0,i=0,s=0,r=0){const n=this._audioCtx.currentTime;e!=null&&this._pannerNode.positionX.setValueAtTime(e,n+r),i!=null&&this._pannerNode.positionY.setValueAtTime(i,n+r),s!=null&&this._pannerNode.positionZ.setValueAtTime(s,n+r)}setDelay(e=0){this._delayNode.delayTime.value=e>f.MAX_DELAY_TIME?f.MAX_DELAY_TIME:e}setReverb(e=null){e?this._convolverNode.buffer=e:this.disconnectConvolver()}resetAudioModifiers(){this.setVolume(),this.setBiquadFilterType(),this.setDistortionCurve(),this.setOriginPos(),this.setDelay(),this.setReverb()}static isAudioFormatSupported(e){return new Audio().canPlayType("audio/"+e.replaceAll(".",""))||"Hell nah"}duplicate(e=this._source,i=this.pos_,s=this._color,r=this._binCB,n=this._sampleCount,a=this._disableAudio,o=this._offsetPourcent,h=this._errorCB,l=this._setupCB,d=this._loopCB,_=this._anchorPos,E=this._alwaysActive){const T=s,C=T.colorRaw,F=new f(e instanceof MediaStreamAudioSourceNode?e.mediaStream.clone():e.cloneNode(),i,(w,m)=>C instanceof tt||C instanceof J?C.duplicate(Array.isArray(C.initPositions)?null:m):T.duplicate(),r,n,a,o,h,l,d,_,E);return F._scale=u.unlinkArr2(this._scale),F._rotation=this._rotation,F._visualEffects=this.visualEffects_,this.initialized?F:null}static BARS(e,i,s,r){return e??(e=100),i??(i=0),s??(s=1),r??(r=2),e/=f.MAX_NORMALISED_DATA_VALUE,i/=f.MAX_NORMALISED_DATA_VALUE,(n,a,o,h)=>{const l=i+e*a;return n.batchFill(x.getRect(o,r,l),h._color,h.visualEffects),o[0]+=s,[o]}}static CIRCLE(e,i,s){return e??(e=100),i??(i=0),s??(s=2),e/=f.MAX_NORMALISED_DATA_VALUE,i/=f.MAX_NORMALISED_DATA_VALUE,(r,n,a,o,h,l)=>{l%s==0&&r.batchStroke(x.getArc(a,i+e*n),o._color,o.visualEffects)}}static TOP_WAVE(e,i,s,r){return e??(e=100),i??(i=0),s??(s=1),r??(r=2),e/=f.MAX_NORMALISED_DATA_VALUE,i/=f.MAX_NORMALISED_DATA_VALUE,(n,a,o,h,l,d,_)=>{const E=i+e*a;return d?d%r==0&&l.lineTo(o[0],o[1]+E):(l=new Path2D).moveTo(o[0],o[1]+E),d==_-1&&n.batchStroke(l,h._color,h.visualEffects),o[0]+=s,[o,l]}}static CLOUD(e,i,s,r,n){return e??(e=100),i??(i=0),s??(s=2),r??(r=2),n??(n=.1),e/=f.MAX_NORMALISED_DATA_VALUE,i/=f.MAX_NORMALISED_DATA_VALUE,(a,o,h,l,d,_)=>{const E=i+e*o,T=n*_;return _%r||a.batchFill(x.getArc([h[0]+E*Math.cos(T),h[1]+E*Math.sin(T)],s),l._color,l.visualEffects),[h]}}get source(){return this._source}get binCB(){return this._binCB}get sampleCount(){return this._sampleCount}get disableAudio(){return this._disableAudio}get offsetPourcent(){return this._offsetPourcent}get errorCB(){return this._errorCB}get audioCtx(){return this._audioCtx}get audioAnalyser(){return this._audioAnalyser}get gainNode(){return this._gainNode}get biquadFilterNode(){return this._biquadFilterNode}get convolverNode(){return this._convolverNode}get waveShaperNode(){return this._waveShaperNode}get dynamicsCompressorNode(){return this._dynamicsCompressorNode}get pannerNode(){return this._pannerNode}get delayNode(){return this._delayNode}get data(){return p(this,Ct)}get fft(){return p(this,Ot)}get bufferLength(){return p(this,Et)}get video(){return this._source}get image(){return this._source}get paused(){var e;return(e=this._source)==null?void 0:e.paused}get isPaused(){return this.paused}get playbackRate(){var e;return(e=this._source)==null?void 0:e.playbackRate}get speed(){return this.playbackRate}get currentTime(){var e;return(e=this._source)==null?void 0:e.currentTime}get loop(){var e;return(e=this._source)==null?void 0:e.loop}get isLooping(){return this.loop}set paused(e){try{e?this._source.pause():Q.playMedia(this._source)}catch{}}set isPaused(e){this.paused=e}set playbackRate(e){this._source.playbackRate=e}set speed(e){this.playbackRate=e}set currentTime(e){this._source.currentTime=e}set loop(e){this._source.loop=e}set isLooping(e){this.loop=e}set binCB(e){this._binCB=e}set sampleCount(e){this._sampleCount=e,D(this,Ot,this._audioAnalyser.fftSize=Math.max(32,2**Math.round(Math.log2(2*this._sampleCount)))),D(this,Et,this._audioAnalyser.frequencyBinCount),D(this,Ct,new Uint8Array(p(this,Et)))}set disableAudio(e){this._disableAudio=e,e?this._audioAnalyser.disconnect(this._audioCtx.destination):this._audioAnalyser.connect(this._audioCtx.destination)}set offsetPourcent(e){this._offsetPourcent=e}set errorCB(e){this._errorCB=e}};Et=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,at=new WeakSet,te=function(e,i,s){const r=()=>{u.isFunction(i)&&i(e)};e.onerror=n=>{u.isFunction(s)&&s(f.ERROR_TYPES.FILE_NOT_FOUND,n)},e.readyState?r():e.onloadeddata=r},Fe=function(e=!0,i,s){navigator.mediaDevices.getUserMedia({audio:e}).then(r=>{r.getAudioTracks().length&&u.isFunction(i)?i(r,!0):u.isFunction(s)&&s(f.ERROR_TYPES.NO_AUDIO_TRACK)}).catch(r=>{u.isFunction(s)&&s(f.ERROR_TYPES.NO_PERMISSION,r)})},me=function(e=!0,i,s){navigator.mediaDevices.getDisplayMedia({audio:e}).then(r=>{r.getAudioTracks().length&&u.isFunction(i)?i(r,!0):u.isFunction(s)&&s(f.ERROR_TYPES.NO_AUDIO_TRACK)}).catch(r=>{u.isFunction(s)&&s(f.ERROR_TYPES.NO_PERMISSION,r)})},S(f,at),c(f,"LOADED_IR_BUFFERS",[]),c(f,"SUPPORTED_AUDIO_FORMATS",["mp3","wav","ogg","aac","m4a","opus","flac"]),c(f,"SOURCE_TYPES",{FILE_PATH:"string",DYNAMIC:"[object Object]",MICROPHONE:"MICROPHONE",SCREEN_AUDIO:"SCREEN_AUDIO",VIDEO:HTMLVideoElement,AUDIO:HTMLAudioElement}),c(f,"MINIMAL_FFT",1),c(f,"MAXIMAL_FFT",32768),c(f,"DEFAULT_SAMPLE_COUNT",64),c(f,"DEFAULT_BINCB",(e,i,s,r)=>{const n=100*i;return e.batchFill(x.getRect(s,2,n),r._color,r.visualEffects),s[0]+=5,[s]}),c(f,"BIN_CALLBACKS",{DEFAULT:f.DEFAULT_BINCB,CIRCLE:f.CIRCLE(),BARS:f.BARS(),TOP_WAVE:f.TOP_WAVE()}),c(f,"MICROPHONE_CHANNELS",{MONO:1,STEREO:2}),c(f,"DEFAULT_MICROPHONE_DELAY",1),c(f,"DEFAULT_MICROPHONE_AUTO_GAIN_CONTROL",!1),c(f,"DEFAULT_MICROPHONE_ECHO_CANCELLATION",!1),c(f,"DEFAULT_MICROPHONE_NOISE_SUPPRESSION",!1),c(f,"DEFAULT_MICROPHONE_CHANNEL_COUNT",f.MICROPHONE_CHANNELS.STEREO),c(f,"DEFAULT_MICROPHONE_SAMPLE_RATE",48e3),c(f,"DEFAULT_MICROPHONE_SAMPLE_SIZE",16),c(f,"DEFAULT_MICROPHONE_SETTINGS",f.loadMicrophone()),c(f,"DEFAULT_SCREEN_AUDIO_SETTINGS",f.loadScreenAudio()),c(f,"MAX_NORMALISED_DATA_VALUE",255/128),c(f,"MAX_DELAY_TIME",179),c(f,"ERROR_TYPES",{NO_PERMISSION:0,NO_AUDIO_TRACK:1,SOURCE_DISCONNECTED:2,FILE_NOT_FOUND:3}),c(f,"BIQUAD_FILTER_TYPES",{DEFAULT:"allpass",ALLPASS:"allpass",BANDPASS:"bandpass",HIGHPASS:"highpass",HIGHSHELF:"highshelf",LOWPASS:"lowpass",LOWSHELF:"lowshelf",NOTCH:"notch",PEAKING:"peaking"});let lt=f;var H,_t,Re,ee,Ne,Ue;const A=class A extends ${constructor(t,e,i,s,r,n,a,o){super(e,null,r,n,a,o),this._source=t,this._size=i,this._errorCB=s,this._sourceCroppingPositions=null}initialize(){A.initializeDataSource(this._source,(t,e)=>{this._source=t,this._size||(this._size=e),u.isDefined(this._size[0])||(this._size=[e[0],this._size[1]]),u.isDefined(this._size[1])||(this._size=[this._size[0],e[1]]),this._initialized=!0,u.isFunction(this._setupCB)&&(this._setupResults=this._setupCB(this,this._parent,this._source))},this._errorCB),this._pos=this.getInitPos()||$.DEFAULT_POS,this.setAnchoredPos()}draw(t,e,i){var s;if(this.initialized){if(this._source instanceof HTMLVideoElement&&!this._source.src&&!((s=this._source.srcObject)!=null&&s.active))return;const r=t.ctx,n=this.centerX,a=this.centerY,o=this._scale[0]!==1||this._scale[1]!==1,h=this._rotation||o;h&&(r.translate(n,a),this._rotation&&r.rotate(u.toRad(this._rotation)),o&&r.scale(this._scale[0],this._scale[1]),r.translate(-n,-a)),this._source instanceof HTMLCanvasElement?t.drawLateImage(this._source,this._pos,this._size,this._sourceCroppingPositions,this.visualEffects):t.drawImage(this._source,this._pos,this._size,this._sourceCroppingPositions,this.visualEffects),h&&r.setTransform(1,0,0,1,0,0)}super.draw(e,i)}static initializeDataSource(t,e,i){var r,n,a,o,h,l,d;const s=A.SOURCE_TYPES;if(typeof t==s.FILE_PATH){const _=t.split(".")[t.split(".").length-1];A.SUPPORTED_IMAGE_FORMATS.includes(_)?A.loadImage(t).onload=E=>{var T;return R(T=A,H,_t).call(T,E.target,e)}:A.SUPPORTED_VIDEO_FORMATS.includes(_)&&R(r=A,H,Re).call(r,A.loadVideo(t),e,i)}else if(t instanceof s.IMAGE||t instanceof s.SVG){const _=t.getAttribute("fakeload");t.complete&&t.src&&!_?R(n=A,H,_t).call(n,t,e):t.onload=()=>{var E;_&&t.removeAttribute("fakeload"),R(E=A,H,_t).call(E,t,e)}}else t.toString()==s.DYNAMIC?t.type==s.CAMERA?R(a=A,H,Ne).call(a,t.settings,e,i):t.type==s.CAPTURE&&R(o=A,H,Ue).call(o,t.settings,e,i):t instanceof s.VIDEO?R(h=A,H,Re).call(h,t,e,i):t instanceof s.CANVAS||t instanceof s.BITMAP||t instanceof s.OFFSCREEN_CANVAS?R(l=A,H,_t).call(l,t,e):t instanceof MediaStream?R(d=A,H,ee).call(d,t,e,i):t instanceof s.BITMAP_PROMISE&&t.then(_=>{var E;return R(E=A,H,_t).call(E,_,e)})}static loadImage(t){const e=new Image;return e.src=t,e}static loadVideo(t,e=!0,i=!0){const s=document.createElement("video");return s.src=t,s.preload="auto",s.loop=e,i&&(s.mute=!0,s.autoplay=i,A.playMedia(s)),s}static loadCamera(t,e,i){return t??(t=A.DEFAULT_CAMERA_RESOLUTION),{type:A.SOURCE_TYPES.CAMERA,settings:{width:{ideal:t==null?void 0:t[0]},height:{ideal:t==null?void 0:t[1]},facingMode:e??A.DEFAULT_FACING_MODE,frameRate:i??A.DEFAULT_CAMERA_FRAME_RATE}}}static loadCapture(t,e,i,s){return t??(t=A.DEFAULT_CAPTURE_RESOLUTION),{type:A.SOURCE_TYPES.CAPTURE,settings:{mediaSource:s??A.DEFAULT_CAPTURE_MEDIA_SOURCE,frameRate:i??A.DEFAULT_CAPTURE_FRAME_RATE,cursor:e??A.DEFAULT_CAPTURE_CURSOR,width:{ideal:t==null?void 0:t[0]},height:{ideal:t==null?void 0:t[1]}}}}playVideo(){A.playMedia(this._source)}pauseVideo(){const t=this._source;t instanceof HTMLVideoElement&&t.pause()}static playMedia(t,e){(t instanceof HTMLVideoElement||t instanceof HTMLAudioElement)&&t.play().catch(()=>nt.addOnFirstInteractCallback(()=>{t.play().catch(i=>{u.isFunction(e)&&e(i,t)})}))}static getNaturalSize(t){return[(t==null?void 0:t.displayWidth)||(t==null?void 0:t.videoWidth)||(t==null?void 0:t.width),(t==null?void 0:t.displayHeight)||(t==null?void 0:t.videoHeight)||(t==null?void 0:t.height)]}duplicate(t=this._source,e=this.pos_,i=this._size,s=this._setupCB,r=this._loopCB,n=this._anchorPos,a=this._alwaysActive){const o=new A(t instanceof MediaStreamAudioSourceNode?t.mediaStream.clone():t.cloneNode(),e,i,s,r,n,a);return o._scale=u.unlinkArr2(this._scale),o._rotation=this._rotation,o._visualEffects=this.visualEffects_,this.initialized?o:null}get size(){return this._size}get width(){return this._size[0]}get height(){return this._size[1]}get trueSize(){return[this._size[0]*this._scale[0],this._size[1]*this._scale[1]]}get naturalSize(){return A.getNaturalSize(this._source)}get centerX(){return this._pos[0]+this._size[0]/2}get centerY(){return this._pos[1]+this._size[1]/2}get centerPos(){return[this.centerX,this.centerY]}get source(){return this._source}get sourceCroppingPositions(){return this._sourceCroppingPositions}get video(){return this._source}get image(){return this._source}get paused(){var t;return(t=this._source)==null?void 0:t.paused}get isPaused(){return this.paused}get playbackRate(){var t;return(t=this._source)==null?void 0:t.playbackRate}get speed(){return this.playbackRate}get currentTime(){var t;return(t=this._source)==null?void 0:t.currentTime}get loop(){var t;return(t=this._source)==null?void 0:t.loop}get isLooping(){return this.loop}set size(t){this._size=t}set width(t){this._size[0]=t}set height(t){this._size[1]=t}set paused(t){try{t?this._source.pause():A.playMedia(this._source)}catch{}}set isPaused(t){this.paused=t}set playbackRate(t){this._source.playbackRate=t}set speed(t){this.playbackRate=t}set currentTime(t){this._source.currentTime=t}set loop(t){this._source.loop=t}set isLooping(t){this.loop=t}set sourceCroppingPositions(t){this._sourceCroppingPositions=t}set sourceCroppingStartPos(t){Array.isArray(this._sourceCroppingPositions)?this._sourceCroppingPositions[0]=t:this._sourceCroppingPositions=[t,[t[0]+A.DEFAULT_WIDTH,t[1]+A.DEFAULT_HEIGHT]]}set sourceCroppingEndPos(t){Array.isArray(this._sourceCroppingPositions)?this._sourceCroppingPositions[1]=t:this._sourceCroppingPositions=[[0,0],t]}};H=new WeakSet,_t=function(t,e,i=t.width||A.DEFAULT_WIDTH,s=t.height||A.DEFAULT_HEIGHT){u.isFunction(e)&&e(t,[i,s])},Re=function(t,e,i){const s=()=>R(this,H,_t).call(this,t,e,t.videoWidth,t.videoHeight);t.onerror=r=>{u.isFunction(i)&&i(A.ERROR_TYPES.FILE_NOT_FOUND,r)},t.readyState?s():t.onloadeddata=s},ee=function(t,e,i){const s=document.createElement("video");s.srcObject=t,s.autoplay=!0,s.setAttribute("permaLoad","1"),t.oninactive=r=>{u.isFunction(i)&&i(A.ERROR_TYPES.SOURCE_DISCONNECTED,r)},s.oncanplay=()=>R(this,H,_t).call(this,s,e,s.videoWidth,s.videoHeight)},Ne=function(t=!0,e,i){navigator.mediaDevices.getUserMedia({video:t}).then(s=>{var r;return R(r=A,H,ee).call(r,s,e,i)}).catch(s=>{u.isFunction(i)&&i(s.toString().includes("NotReadableError")?A.ERROR_TYPES.DEVICE_IN_USE:A.ERROR_TYPES.NO_PERMISSION,s)})},Ue=function(t=!0,e,i){navigator.mediaDevices.getDisplayMedia({video:t}).then(s=>{var r;return R(r=A,H,ee).call(r,s,e,i)}).catch(s=>{u.isFunction(i)&&i(A.ERROR_TYPES.NO_PERMISSION,s)})},S(A,H),c(A,"SUPPORTED_IMAGE_FORMATS",["jpg","jpeg","png","gif","svg","webp","bmp","tiff","ico","heif","heic"]),c(A,"SUPPORTED_VIDEO_FORMATS",["mp4","webm","ogv","mov","avi","mkv","flv","wmv","3gp","m4v"]),c(A,"DEFAULT_WIDTH",128),c(A,"DEFAULT_HEIGHT",128),c(A,"SOURCE_TYPES",{FILE_PATH:"string",DYNAMIC:"[object Object]",CAMERA:"CAMERA",CAPTURE:"CAPTURE",IMAGE:HTMLImageElement,SVG:SVGImageElement,BITMAP_PROMISE:Promise,BITMAP:ImageBitmap,VIDEO:HTMLVideoElement,CANVAS:HTMLCanvasElement,OFFSCREEN_CANVAS:OffscreenCanvas}),c(A,"DYNAMIC_SOURCE_TYPES",{VIDEO:HTMLVideoElement,CANVAS:HTMLCanvasElement}),c(A,"RESOLUTIONS",{SD:[640,480],HD:[1280,720],FULL_HD:[1920,1080],"4K":[3840,2160],FOURK:[3840,2160],MAX:[3840,2160]}),c(A,"CAMERA_FACING_MODES",{USER:"user",ENVIRONMENT:"environment"}),c(A,"DEFAULT_FACING_MODE",A.CAMERA_FACING_MODES.USER),c(A,"DEFAULT_CAMERA_RESOLUTION",A.RESOLUTIONS.HD),c(A,"DEFAULT_CAMERA_FRAME_RATE",30),c(A,"DEFAULT_CAMERA_SETTINGS",A.loadCamera()),c(A,"DEFAULT_CAMERAS",{CAMERA_SD:A.loadCamera(A.RESOLUTIONS.SD),CAMERA_HD:A.loadCamera(A.RESOLUTIONS.HD),CAMERA_FULL_HD:A.loadCamera(A.RESOLUTIONS.FULL_HD),CAMERA_4K:A.loadCamera(A.RESOLUTIONS.FOURK),CAMERA:A.DEFAULT_CAMERA_SETTINGS}),c(A,"CAPTURE_MEDIA_SOURCES",{SCREEN:"screen",WINDOW:"window",TAB:"tab"}),c(A,"CAPTURE_CURSOR",{ALWAYS:"always",MOTION:"motion",NONE:"none"}),c(A,"DEFAULT_CAPTURE_RESOLUTION",A.RESOLUTIONS.HD),c(A,"DEFAULT_CAPTURE_MEDIA_SOURCE","screen"),c(A,"DEFAULT_CAPTURE_FRAME_RATE",30),c(A,"DEFAULT_CAPTURE_CURSOR","always"),c(A,"DEFAULT_CAPTURE_SETTINGS",A.loadCapture()),c(A,"DEFAULT_CAPTURES",{CAPTURE_SD:A.loadCapture(A.RESOLUTIONS.SD),CAPTURE_HD:A.loadCamera(A.RESOLUTIONS.HD),CAPTURE_FULL_HD:A.loadCamera(A.RESOLUTIONS.FULL_HD),CAPTURE_4k:A.loadCamera(A.RESOLUTIONS.FOURK),CAPTURE:A.DEFAULT_CAPTURE_SETTINGS}),c(A,"ERROR_TYPES",{NO_PERMISSION:0,DEVICE_IN_USE:1,SOURCE_DISCONNECTED:2,FILE_NOT_FOUND:3});let Q=A;var xt;const Ft=class Ft extends ${constructor(e,i,s,r,n,a,o,h,l,d){super(i,s,o,h,l,d);S(this,xt,1);this._text=e??"",this._textStyles=r,this._drawMethod=(n==null?void 0:n.toUpperCase())??x.DRAW_METHODS.FILL,this._maxWidth=a??void 0,this._lineHeigth=null,this._size=null}initialize(){this._textStyles=u.isFunction(this._textStyles)?this._textStyles(this.render,this):this._textStyles??this.render.defaultTextProfile,this._size=this.getSize(),this._lineHeigth??(this._lineHeigth=this.trueSize[1]/p(this,xt)),super.initialize()}draw(e,i,s){if(this.initialized){if(this.a??1>N.OPACITY_VISIBILITY_THRESHOLD){const r=e.ctx,n=this._pos[0],a=this._pos[1],o=this._scale[0]!==1||this._scale[1]!==1,h=this._rotation||o,l=this.getTextValue();h&&(r.translate(n,a),this._rotation&&r.rotate(u.toRad(this._rotation)),o&&r.scale(this._scale[0],this._scale[1]),r.translate(-n,-a)),this._drawMethod=="FILL"?e.fillText(l,this._pos,this._color,this._textStyles,this._maxWidth,this._lineHeigth,this.visualEffects):e.strokeText(l,this._pos,this._color,this._textStyles,this._maxWidth,this._lineHeigth,this.visualEffects),h&&r.setTransform(1,0,0,1,0,0)}}else this.initialized=!0;super.draw(i,s)}getSize(e=this._textStyles,i=this.getTextValue()){K.apply(Ft.MEASUREMENT_CTX,...e.getStyles());const s=i.split(`
`),r=D(this,xt,s.length),n=r>1?s.reduce((l,d)=>l.length<d.length?d:l):i,{width:a,actualBoundingBoxAscent:o,actualBoundingBoxDescent:h}=Ft.MEASUREMENT_CTX.measureText(n);return[u.round(this._maxWidth||a,2),(o+h)*r]}getTextValue(){return u.isFunction(this._text)?this._text(this._parent,this):this._text}duplicate(e=this._text,i=this.pos_,s=this._color,r=this._textStyles,n=this._drawMethod,a=this._maxWidth,o=this._setupCB,h=this._loopCB,l=this._anchorPos,d=this._alwaysActive){const _=s,E=_.colorRaw,T=new Ft(e,i,(C,F)=>E instanceof tt||E instanceof J?E.duplicate(Array.isArray(E.initPositions)?null:F):_.duplicate(),r,n,a,o,h,l,d);return T._scale=u.unlinkArr2(this._scale),T._rotation=this._rotation,T._visualEffects=this.visualEffects_,this.initialized?T:null}get text(){return this._text}get textStyles(){return this._textStyles}get drawMethod(){return this._drawMethod}get maxWidth(){return this._maxWidth}get size(){return this._size}get lineHeigth(){return this._lineHeigth}get trueSize(){return[this._size[0]*this._scale[0],this._size[1]*this._scale[1]]}get render(){return this._parent.render}get lineCount(){return p(this,xt)}set text(e){this._text=e,this._size=this.getSize()}set textStyles(e){this._textStyles=e??this.render.defaultTextProfile,this._size=this.getSize()}set drawMethod(e){this._drawMethod=e.toUpperCase()}set maxWidth(e){this._maxWidth=e??void 0,this._size=this.getSize()}set lineHeigth(e){this._lineHeigth=e}};xt=new WeakMap,c(Ft,"MEASUREMENT_CTX",new OffscreenCanvas(1,1).getContext("2d"));let It=Ft;class ct{constructor(t,e){this._initPositions=t,this._positions=t,this._rotation=e??0,this._lastChangeValue=null,this._value=null}static getAutomaticPositions(t,e=[0,0,0,0]){let i=null,[s,r,n,a]=e;if(r==null&&(r=s),n==null&&(n=s),a==null&&(a=r),t instanceof At){const o=u.getMinMax(t.dots,"x"),h=u.getMinMax(t.dots,"y"),l=t.radius;i=[[o[0]-l,h[0]-l],[o[1]+l,h[1]+l]]}else if(t instanceof G)i=[[t.left,t.top],[t.right,t.bottom]];else if(t instanceof It){const[o,h]=t.trueSize,[l,d]=t.pos,_=o/2,E=h/2;i=[[l-_,d-E],[l+_,d+E]]}else if(t instanceof lt){const o=lt.DEFAULT_MICROPHONE_SAMPLE_SIZE;return[[t.x-o,t.y-o],[t.x+o,t.y+o]]}return i[0][0]-=a,i[0][1]-=s,i[1][0]+=r,i[1][1]+=n,i}get initPositions(){return this._initPositions}get positions(){return this._positions}get rotation(){return this._rotation}get isDynamic(){var t;return((t=this._initPositions)==null?void 0:t.pos)!=null}get value(){return this.isDynamic&&this.update(),this._value}set initPositions(t){this._initPositions=t}set positions(t){this._positions=t,this.isDynamic||this.update(!0)}set rotation(t){this._rotation=u.round(t,2)%360,this.isDynamic||this.update(!0)}}c(ct,"PLACEHOLDER","PLACEHOLDER"),c(ct,"PLACEHOLDER_COLOR","transparent");var ne,ae,oe,Lt,Zt,et,Me,ye,we,Ce;const M=class M extends ct{constructor(e,i,s,r,n,a,o,h,l,d,_){super(s,o);S(this,et);S(this,Lt,null);S(this,Zt,!1);this._id=ce(M,ne)._++,this._render=e,this._source=i,this._sourceCroppingPositions=r??null,this._keepAspectRatio=n??!1,this._forcedUpdates=a??M.DEFAULT_FORCE_UPDATE_LEVEL;const E=d??M.DEFAULT_FRAME_RATE;this._frameRate=E%1?E:1/Math.max(E,0),this._errorCB=h,this._readyCB=l,this._repeatMode=_??M.DEFAULT_REPETITION_MODE,M.LOADED_PATTERN_SOURCES[this._id]=this,Q.initializeDataSource(i,T=>{this._source=T,D(this,Zt,!0),u.isFunction(this._readyCB)&&this._readyCB(this),this.update(M.FORCE_UPDATE_LEVELS.OVERRIDE)},this._errorCB)}getAutomaticPositions(e=this._initPositions){if(e instanceof At){if(R(this,et,Me).call(this,e)){const i=u.getMinMax(e.dots,"x"),s=u.getMinMax(e.dots,"y"),r=e.radius;return[[i[0]-r,s[0]-r],[i[1]+r,s[1]+r]]}return this._positions}if(e instanceof G)return R(this,et,ye).call(this,e)?[[e.left,e.top],[e.right,e.bottom]]:this._positions;if(e instanceof It){if(R(this,et,we).call(this,e)){const[i,s]=e.trueSize,r=e.lineHeigth,n=i/2,a=e.x,o=e.y-r/1.8;return[[a-n,o],[a+n,o+r*e.lineCount]]}return this._positions}return e instanceof lt?ct.getAutomaticPositions(e):this._positions}update(e=this._forcedUpdates){if(p(this,Zt)){const i=this._source,s=this._render.ctx,r=i instanceof HTMLCanvasElement,n=M.FORCE_UPDATE_LEVELS,a=r||e==n.RESPECT_FRAME_RATE?performance.now()/1e3:i.currentTime;if(a!=null&&e!==n.OVERRIDE){if(p(this,Lt)>a&&D(this,Lt,a),!(a-p(this,Lt)>=this._frameRate))return;D(this,Lt,a)}const o=this.getAutomaticPositions();if((!i.currentTime||i.paused)&&Array.isArray(this._positions)&&u.arr22Equals(o,this._positions))return;this._positions=o,r?this._render._bactchedStandalones.push(()=>this._value=R(this,et,Ce).call(this,s,i)):this._value=R(this,et,Ce).call(this,s,i)}}toString(){return this._id+M.SERIALIZATION_SEPARATOR}playVideo(){Q.playMedia(this._source)}pauseVideo(){try{this._source.pause()}catch{}}duplicate(e=this._positions,i=this._render,s=this._source,r=this._sourceCroppingPositions,n=this._keepAspectRatio,a=this._forcedUpdates,o=this._rotation,h=this._errorCB,l=this._frameRate,d=this._repeatMode){return!(s instanceof HTMLElement)||s.getAttribute("permaLoad")||s instanceof HTMLCanvasElement||(s=s.cloneNode()).setAttribute("fakeload","1"),new M(i,s,u.unlinkArr22(e),u.unlinkArr22(r),n,a,o,h,null,l,d)}static loadCamera(e,i,s=this._frameRate){return Q.loadCamera(e,i,s)}static loadCapture(e,i,s=this.frameRate,r){return Q.loadCapture(e,i,s,r)}get id(){return this._id}get render(){return this._render}get source(){return this._source}get sourceCroppingPositions(){return this._sourceCroppingPositions}get keepAspectRatio(){return this._keepAspectRatio}get forcedUpdates(){return this._forcedUpdates}get repeatMode(){return this._repeatMode}get frameRate(){return 1/this._frameRate}get value(){var i;const e=this._source;return e instanceof HTMLVideoElement&&!e.src&&!((i=e.srcObject)!=null&&i.active)?M.PLACEHOLDER_COLOR:((this._forcedUpdates||e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement)&&this.update(),this._value??M.PLACEHOLDER_COLOR)}get naturalSize(){return Q.getNaturalSize(this._source)}get video(){return this._source}get image(){return this._source}get paused(){var e;return(e=this._source)==null?void 0:e.paused}get isPaused(){return this.paused}get playbackRate(){var e;return(e=this._source)==null?void 0:e.playbackRate}get speed(){return this.playbackRate}get currentTime(){var e;return(e=this._source)==null?void 0:e.currentTime}get loop(){var e;return(e=this._source)==null?void 0:e.loop}get isLooping(){return this.loop}set source(e){Q.initializeDataSource(e,i=>{this._source=i,this.update(!0)})}set sourceCroppingPositions(e){this._sourceCroppingPositions=e,this.update(!0)}set sourceCroppingStartPos(e){Array.isArray(this._sourceCroppingPositions)?this._sourceCroppingPositions[0]=e:this._sourceCroppingPositions=[e,[e[0]+Q.DEFAULT_WIDTH,e[1]+Q.DEFAULT_HEIGHT]],this.update(!0)}set sourceCroppingEndPos(e){Array.isArray(this._sourceCroppingPositions)?this._sourceCroppingPositions[1]=e:this._sourceCroppingPositions=[[0,0],e],this.update(!0)}set keepAspectRatio(e){this._keepAspectRatio=e,this.update(!0)}set forcedUpdates(e){this._forcedUpdates=e,this.update(!0)}set repeatMode(e){this._repeatMode=e,this.update(!0)}set frameRate(e){this._frameRate=1/Math.max(e,0)}set rotation(e){this._rotation=u.round(e,2)%360,this.update(!0)}};ne=new WeakMap,ae=new WeakMap,oe=new WeakMap,Lt=new WeakMap,Zt=new WeakMap,et=new WeakSet,Me=function(e){const i=e.dotsPositions+e.radius;return i!==this._lastChangeValue&&(this._lastChangeValue=i,!0)},ye=function(e){const i=e.stringPos+e.radius;return i!==this._lastChangeValue&&(this._lastChangeValue=i,!0)},we=function(e){const i=e.trueSize+e.pos;return i!==this._lastChangeValue&&(this._lastChangeValue=i,!0)},Ce=function(e,i){let s,r;const n=p(M,oe),a=this._sourceCroppingPositions;if(a){const l=p(M,ae),d=l.canvas,_=a[0][0],E=a[0][1];s=d.width=Math.abs(a[1][0]-_),r=d.height=Math.abs(a[1][1]-E),l.clearRect(0,0,s,r),l.drawImage(i,_,E,s,r,0,0,s,r),i=d}else[s,r]=Q.getNaturalSize(i);const o=e.createPattern(i,this._repeatMode),h=this._positions;if(h){const l=h[0],d=h[1],_=d[0]-l[0],E=d[1]-l[1],T=_/s,C=E/r,F=this._rotation;if(this._keepAspectRatio){const w=T>C,m=w?T:C,Z=s*m/2,W=r*m/2;F?o.setTransform(n.translate(l[0]-(w?0:Z-_/2)+Z,l[1]-(w?W-E/2:0)+W).rotate(F).translate(-Z,-W).scale(m,m)):o.setTransform(n.translate(l[0]-(w?0:Z-_/2),l[1]-(w?W-E/2:0)).scale(m,m))}else{const w=s*T/2,m=r*C/2;F?o.setTransform(n.translate(l[0]+w,l[1]+m).rotate(F).translate(-w,-m).scale(T,C)):o.setTransform(n.translate(l[0],l[1]).scale(T,C))}}return o},S(M,ne,0),S(M,ae,new OffscreenCanvas(1,1).getContext("2d")),S(M,oe,new DOMMatrixReadOnly),c(M,"LOADED_PATTERN_SOURCES",[]),c(M,"PLACEHOLDER_COLOR","transparent"),c(M,"REPETITION_MODES",{REPEAT:"repeat",REPEAT_X:"repeat-x",REPEAT_Y:"repeat-y",NO_REPEAT:"no-repeat"}),c(M,"DEFAULT_REPETITION_MODE",M.REPETITION_MODES.NO_REPEAT),c(M,"DEFAULT_FRAME_RATE",1/30),c(M,"SERIALIZATION_SEPARATOR","!"),c(M,"FORCE_UPDATE_LEVELS",{DISABLED:null,RESPECT_FRAME_RATE:!0,OVERRIDE:2}),c(M,"DEFAULT_FORCE_UPDATE_LEVEL",M.FORCE_UPDATE_LEVELS.DISABLED);let J=M;const mt=class mt extends ${constructor(t,e,i,s,r,n,a){super(t,i,s,r,n,a),this._initRadius=e,this._radius=this._initRadius}initialize(){this._radius=this.getInitRadius()??mt.DEFAULT_RADIUS,super.initialize()}getInitRadius(){return u.isFunction(this._initRadius)?this._initRadius(this._parent instanceof nt?this:this._parent,this):this._initRadius??null}isWithin(t,e){const[i,s]=t;return u.isDefined(i)&&u.isDefined(s)&&(e?u.getDist(i,s,this.x,this.y)<=(this.radius||1)*(+e==1?1.025:+e):i>=this.left&&i<=this.right&&s>=this.top&&s<=this.bottom)}get radius(){return this._radius}get initRadius(){return this._initRadius}set radius(t){this._radius=u.round(t<0?0:t,mt.RADIUS_PRECISION)}set initRadius(t){this._initRadius=t}};c(mt,"DEFAULT_RADIUS",5),c(mt,"RADIUS_PRECISION",4);let Dt=mt;const Yt=class Yt extends Dt{constructor(t,e,i,s,r,n,a,o,h,l,d,_){super(t,i??Dt.DEFAULT_RADIUS,s||N.DEFAULT_COLOR,o,h,l,d),this._limit=r||Yt.DEFAULT_LIMIT,this._initDots=e,this._dots=[],this._ratioPos=[1/0,1/0],this._drawEffectCB=n,this._ratioPosCB=a,this._fragile=_||!1}initialize(){this._pos=this.getInitPos(),this.setAnchoredPos(),Array.isArray(this._initDots)||this._initDots instanceof G?this.add(this._initDots):u.isFunction(this._initDots)?this.add(this._initDots(this,this._parent)):typeof this._initDots=="string"&&this.add(this.createFromString(this._initDots)),this.setRadius(this.getInitRadius(),!0),this.setColor(this.getInitColor(),!0),this._visualEffects&&this.setVisualEffects(this._visualEffects,!0),this.initialized=!0,u.isFunction(this._setupCB)&&(this._setupResults=this._setupCB(this,this==null?void 0:this.parent))}draw(t,e,i){super.draw(e,i),u.isFunction(this._ratioPosCB)&&(this._ratioPos=this._ratioPosCB(this))}add(t){this._dots.push(...[t].flat().filter(e=>e).map(e=>(e.initColor==null&&(e.initColor=this.colorRaw),e.initRadius==null&&(e.initRadius=this._radius),e.alwaysActive==null&&(e.alwaysActive=this._alwaysActive),e.visualEffect==null&&(e.visualEffect=this.visualEffects_),e._parent=this,e.initialize(),e))),this._parent.updateCachedAllEls()}remove(t=null){t?this._dots=this._dots.filter(e=>e.id!=t):this._parent.remove(this._id),this._parent.updateCachedAllEls()}static generate(t,e,i,s,r,n){t??(t=h=>0),e??(e=[0,0]),i??(i=100),s??(s=1),r??(r=[-50,50]);let a=[],o=null;for(let h=0;h<=i;h+=u.getValueFromRange(s)){const l=new G([e[0]+h,e[1]+u.getValueFromRange(r)+t(h)]);o&&u.isFunction(n)&&n(l,o),a.push(l),o=l}return a}createFromString(t,e=[0,0],i=[25,25],s="o"){const r=[];return t.split(`
`).filter(n=>n).forEach((n,a)=>{let[o,h]=e;h+=a*i[1],[...n].forEach(l=>{l==s&&r.push(new G([o+i[0]/2,h+i[1]/2])),o+=i[0]})}),r}setRadius(t=this._radius,e){this._radius=t;const i=this._dots.length;for(let s=0;s<i;s++){const r=this._dots[s];e&&r.initRadius==null?(r.radius=t,r.initRadius=t):e||(r.radius=t,r.initRadius||(r.initRadius=t))}}setColor(t=this._color,e){this.color=t;const i=this._dots.length;for(let s=0;s<i;s++){const r=this._dots[s];e&&!r.initColor?(r.color=t,r.initColor=t):e||(r.color=t,r.initColor||(r.initColor=t))}}setVisualEffects(t=this._visualEffects,e){this._visualEffects=t;const i=this._dots.length;for(let s=0;s<i;s++){const r=this._dots[s];e&&!r.visualEffect?r.visualEffects=t:e||(r.visualEffects=t)}}addForce(t,e,i=1e3,s=Y.easeInOutQuad,r=!0,n=!0){const a=u.toRad(e),o=this.x,h=this.y,l=u.getAcceptableDiff(t*Math.cos(a),u.DEFAULT_ACCEPTABLE_DIFFERENCE),d=u.getAcceptableDiff(t*Math.sin(a),u.DEFAULT_ACCEPTABLE_DIFFERENCE);return this.playAnim(new Y(_=>{this.moveAt([o+l*_,h-d*_])},i,s),r,n)}rotateBy(t,e=this.getCenter()){const[i,s]=e;this._dots.forEach(r=>{const n=r.x-i,a=r.y-s,o=Math.cos(u.toRad(t)),h=Math.sin(u.toRad(t));r.x=n*o-a*h+i,r.y=n*h+a*o+s}),this._rotation=(this._rotation+t)%360}rotateAt(t,e=this.getCenter()){this.rotateBy(360-(this._rotation-t),e)}rotateTo(t,e=1e3,i=Y.easeInOutQuad,s=this.getCenter(),r=!0,n=!0){const a=this._rotation,o=t-this._rotation;return this.playAnim(new Y(h=>{this.rotateAt(a+o*h,s)},e,i),r,n)}scaleBy(t,e=this.getCenter()){const[i,s]=t,[r,n]=e;this._dots.forEach(a=>{a.x=(a.x-r)*i+r,a.y=(a.y-n)*s+n}),this._scale=[this._scale[0]*i,this._scale[1]*s]}scaleAt(t,e=this.getCenter()){const i=t[0]/this._scale[0],s=t[1]/this._scale[1];this.scaleBy([i,s],e)}scaleTo(t,e=1e3,i=Y.easeInOutQuad,s=this.getCenter(),r=!0,n=!0){const a=this._scale,o=t[0]-this._scale[0],h=t[1]-this._scale[1];return this.playAnim(new Y(l=>{this.scaleAt([a[0]+o*l,a[1]+h*l],s)},e,i),r,n)}isWithin(t){const e=this.dots.length;if(e>2){const i=new Path2D,s=this._dots[0].pos;i.moveTo(s[0],s[1]);for(let r=1;r<e;r++){const n=this._dots[r].pos;i.lineTo(n[0],n[1])}return i.closePath(),this.ctx.isPointInPath(i,t[0],t[1])}return!1}getCenter(){const t=u.getMinMax(this.dots,"x"),e=u.getMinMax(this.dots,"y");return[t[0]+(t[1]-t[0])/2,e[0]+(e[1]-e[0])/2]}clear(){this._dots=[],this._parent.updateCachedAllEls()}reset(){this._initDots&&(this.clear(),this.initialize())}enableDotsPathCaching(){const t=this._dots,e=t.length;for(let i=0;i<e;i++)t[i].updateCachedPath()}disableDotsPathCaching(){const t=this._dots,e=t.length;for(let i=0;i<e;i++)t[i].disablePathCaching()}duplicate(t=this.pos_,e=this._dots.map(E=>E.duplicate()),i=this._radius,s=this._color,r=this._limit,n=this._drawEffectCB,a=this._ratioPosCB,o=this._setupCB,h=this._loopCB,l=this._anchorPos,d=this._alwaysActive,_=this._fragile){const E=s,T=E.colorRaw,C=new Yt(t,e,i,(F,w)=>T instanceof tt||T instanceof J?T.duplicate(Array.isArray(T.initPositions)?null:w):E.duplicate(),r,n,a,o,h,l,d,_);return C._scale=u.unlinkArr2(this._scale),C._rotation=this._rotation,C._visualEffects=this.visualEffects_,this.initialized?C:null}get cvs(){return this._parent}get ctx(){return this.cvs.ctx}get render(){return this.cvs.render}get dots(){return this._dots}get limit(){return this._limit}get initDots(){return this._initDots}get drawEffectCB(){return this._drawEffectCB}get ratioPos(){return this._ratioPos}get ratioPosCB(){return this._ratioPosCB}get lastDotsPos(){return this._lastDotsPos}get dotsPositions(){let t="",e=this.dots.length;for(let i=0;i<e;i++)t+=this.dots[i].stringPos;return t}get firstDot(){return this._dots[0]}get secondDot(){return this._dots[1]}get thirdDot(){return this._dots[2]}get lastDot(){return u.getLast(this._dots,0)}get asSource(){return this._dots}set ratioPos(t){this._ratioPos=t}set drawEffectCB(t){this._drawEffectCB=t}set ratioPosCB(t){this._ratioPosCB=t}set lastDotsPos(t){this._lastDotsPos=t}set limit(t){this._limit=t}};c(Yt,"DEFAULT_LIMIT",100);let At=Yt;var $t,Jt,V,Gt,ie,se,ve,xe,ke;const k=class k extends ct{constructor(e,i,s,r,n){super(i,n);S(this,V);S(this,$t,null);S(this,Jt,null);this.id=k.a++,this._ctx=e.ctx??e,this._type=r||k.DEFAULT_TYPE,this._colorStops=s.map(([a,o])=>[a,N.adjust(o)]),this.update()}getAutomaticPositions(e=this._initPositions){if(e instanceof At){if(R(this,V,se).call(this)||R(this,V,ve).call(this,e)){const i=u.getMinMax(e.dots,"x"),s=u.getMinMax(e.dots,"y"),r=i[0],n=s[0],a=i[1],o=s[1],h=r+(a-r)/2,l=n+(o-n)/2;return this._type==k.TYPES.LINEAR?R(this,V,Gt).call(this,r-h,n-l,a-h,o-l,h,l):this._type==k.TYPES.RADIAL?R(this,V,ie).call(this,h,l,Math.max(a-r,o-n)):e.getCenter()}return this._positions}if(e instanceof G)return R(this,V,se).call(this)||R(this,V,xe).call(this,e)?this._type==k.TYPES.LINEAR?R(this,V,Gt).call(this,e.left-e.x,e.top-e.y,e.right-e.x,e.bottom-e.y,e.x,e.y):this._type==k.TYPES.RADIAL?R(this,V,ie).call(this,e.x,e.y,e.radius):e.pos_:this._positions;if(e instanceof It){if(R(this,V,se).call(this)||R(this,V,ke).call(this,e)){const[i,s]=e.trueSize,[r,n]=e.pos,a=r-i/2,o=r+i/2,h=n-s/2,l=n+s/2;return this._type==k.TYPES.LINEAR?R(this,V,Gt).call(this,a-r,h-n,o-r,l-n,r,n):this._type==k.TYPES.RADIAL?R(this,V,ie).call(this,r,n,Math.max(o-a,l-h)):e.pos_}return this._positions}if(e instanceof lt)return ct.getAutomaticPositions(e);if(this._type==k.TYPES.LINEAR){const[[i,s],[r,n]]=e,a=i+(r-i)/2,o=s+(n-s)/2;return R(this,V,Gt).call(this,i-a,s-o,r-a,n-o,a,o)}return this._positions}update(e){if(this._initPositions!=ct.PLACEHOLDER){const i=this.getAutomaticPositions();return!e&&Array.isArray(this._positions)&&u.arr22Equals(i,this._positions)?void 0:this._value=k.getCanvasGradient(this._ctx,this._positions=i,this._colorStops,this._type,this._rotation)}}duplicate(e=this._positions,i=this._ctx,s=this._colorStops,r=this._type,n=this._rotation){return new k(i,u.unlinkArr22(e),[...s],r,n)}toString(){const e=k.SERIALIZATION_SEPARATOR;return this._positions+e+this._colorStops.flat().join(k.SERIALIZATION_COLOR_STOPS_SEPARATOR)+e+this._type+e+this._rotation}static getCanvasGradient(e,i,s,r,n){const a=r==k.TYPES.CONIC?e.createConicGradient(u.toRad(n),i[0],i[1]):e[`create${r}Gradient`](...i[0],...i[1]),o=s.length;for(let h=0;h<o;h++)a.addColorStop(s[h][0],N.getColorValue(s[h][1]));return a}static getCanvasGradientFromString(e,i){let[s,r,n,a]=i.split(k.SERIALIZATION_SEPARATOR),o=s.split(","),h=r.split(k.SERIALIZATION_COLOR_STOPS_SEPARATOR),l=h.length;s=o.length==2?[+o[0],+o[1]]:[[+o[0],+o[1]],[+o[2],+o[3]]],r=[];for(let d=0;d<l;d+=2)r.push([+h[d],h[d+1]]);return k.getCanvasGradient(e,s,r,n,+a)}get ctx(){return this._ctx}get type(){return this._type}get colorStops(){return this._colorStops}set colorStops(e){this._colorStops=e.map(([i,s])=>[i,N.adjust(s)]),this.isDynamic||this.update()}set type(e){this._type=e,this.isDynamic||this.update()}};$t=new WeakMap,Jt=new WeakMap,V=new WeakSet,Gt=function(e,i,s,r,n,a){const o=Math.cos(u.toRad(this._rotation)),h=Math.sin(u.toRad(this._rotation)),l=u.round;return[[l(e*o-i*h+n),l(e*h+i*o+a)],[l(s*o-r*h+n),l(s*h+r*o+a)]]},ie=function(e,i,s){return[[e,i,s],[e,i,.25*s]]},se=function(){return(p(this,$t)!==this._rotation||p(this,Jt)!==this._type)&&(D(this,$t,this._rotation),D(this,Jt,this._type),!0)},ve=function(e){const i=e.dotsPositions;return i!==this._lastChangeValue&&(this._lastChangeValue=i,!0)},xe=function(e){const i=e.stringPos;return i!==this._lastChangeValue&&(this._lastChangeValue=i,!0)},ke=function(e){const i=e.trueSize+e.pos;return i!==this._lastChangeValue&&(this._lastChangeValue=i,!0)},c(k,"TYPES",{LINEAR:"Linear",RADIAL:"Radial",CONIC:"Conic"}),c(k,"DEFAULT_TYPE",k.TYPES.LINEAR),c(k,"SERIALIZATION_SEPARATOR","*"),c(k,"SERIALIZATION_COLOR_STOPS_SEPARATOR","$"),c(k,"a",0);let tt=k;class G extends Dt{constructor(t,e,i,s,r,n,a){super(t,e,i,s,null,r,n),this._connections=[],this._cachedPath=!a}draw(t,e,i){var s,r;if(this.initialized){const n=this.drawEffectCB;if(n){const a=this.getDistance(),o=this.getRatio(a),h=o<1,l=this._parent;n(t,this,h?o:1,l.setupResults,l.parent.mouse,a,l,h,o)}if(this._radius){const a=t.ctx,o=this._pos[0],h=this._pos[1],l=this._scale[0],d=this._scale[1],_=l!==1||d!==1;_||((r=(s=this._visualEffects)==null?void 0:s[0])==null?void 0:r.indexOf("#"))!==-1||this._rotation?(_&&(a.translate(o,h),a.scale(l,d),this._rotation&&a.rotate(u.toRad(this._rotation)),a.translate(-o,-h)),t.fill(this._cachedPath||x.getArc(this._pos,this._radius),this._color,this.visualEffects),_&&a.setTransform(1,0,0,1,0,0)):t.batchFill(this._cachedPath||x.getArc(this._pos,this._radius),this._color,this.visualEffects)}}else this.initialized=!0,this._cachedPath&&this.updateCachedPath();super.draw(e,i)}getDistance(t=this.ratioPos[0],e=this.ratioPos[1]){return u.getDist(t,e,this.x,this.y)}getRatio(t){return t/this.limit}addConnection(t){t instanceof G&&this._connections.push(t)}removeConnection(t){this._connections=this._connections.filter(e=>typeof t=="number"?e.id!==t:e.id!==t.id)}remove(){this._parent.remove(this._id)}getLinearIntersectPoints(t=this._connections[0],e=t.radius??5,i=this,s=this.radius??5){const[r,n]=t.pos??t,[a,o]=i.pos??i,[h,l,d]=u.getLinearFn([a,o],[r,n]),_=e**2,E=s**2,T=2*(1+h**2),C=-(2*h*(l-o)-2*a),F=Math.sqrt(C**2-T/2*4*((l-o)**2+a**2-E)),w=-(2*h*(l-n)-2*r),m=Math.sqrt(w**2-T/2*4*((l-n)**2+r**2-_)),Z=(C+F)/T,W=(C-F)/T,ut=(w+m)/T,bt=(w-m)/T,kt=d(Z),Bt=d(W),he=d(ut);return[[[Z,kt],[W,Bt]],[[bt,d(bt)],[ut,he]]]}updateCachedPath(){this._cachedPath=x.getArc(this._pos,this._radius)}disablePathCaching(){this._cachedPath=null}duplicate(t=this.getInitPos(),e=this._radius,i=this._color,s=this._setupCB,r=this._anchorPos,n=this._alwaysActive,a=!this._cachedPath){const o=i,h=o.colorRaw,l=new G(t,e,(h instanceof tt||h instanceof J)&&h._initPositions.id!=null&&this._parent.id!=null&&h._initPositions.id==this._parent.id?null:(d,_)=>h instanceof tt||h instanceof J?h.duplicate(Array.isArray(h.initPositions)?null:_):o.duplicate(),s,r,n,a);return l._scale=u.unlinkArr2(this._scale),l._rotation=this._rotation,l._visualEffects=this.visualEffects_,l}get ctx(){return this._parent.parent.ctx}get cvs(){return this._parent.parent||this._parent}get render(){return this.cvs.render}get limit(){return this._parent.limit}get drawEffectCB(){var t;return(t=this._parent)==null?void 0:t.drawEffectCB}get mouse(){return this.cvs.mouse}get ratioPos(){return this._parent.ratioPos}get connections(){return this._connections}get parentSetupResults(){var t;return(t=this._parent)==null?void 0:t.setupResults}get top(){return this.y-this._radius}get bottom(){return this.y+this._radius}get right(){return this.x+this._radius}get left(){return this.x-this._radius}get width(){return 2*this._radius}get height(){return 2*this._radius}get x(){return super.x}get y(){return super.y}get pos(){return this._pos}get relativeX(){return super.relativeX}get relativeY(){return super.relativeY}get relativePos(){return super.relativePos}get radius(){return super.radius}get cachedPath(){return this._cachedPath}set x(t){t=u.round(t,$.POSITION_PRECISION),this._pos[0]!=t&&(this._pos[0]=t,this._cachedPath&&this.updateCachedPath())}set y(t){t=u.round(t,$.POSITION_PRECISION),this._pos[1]!=t&&(this._pos[1]=t,this._cachedPath&&this.updateCachedPath())}set pos(t){u.arr2Equals(t,this._pos)||(this.x=t[0],this.y=t[1],this._cachedPath&&this.updateCachedPath())}set relativeX(t){this.x=this.anchorPos[0]+t}set relativeY(t){this.y=this.anchorPos[1]+t}set relativePos(t){this.relativeX=u.round(t[0],$.POSITION_PRECISION),this.relativeY=u.round(t[1],$.POSITION_PRECISION)}set radius(t){t=u.round(t<0?0:t,Dt.RADIUS_PRECISION),this._radius!=t&&(this._radius=t,this._cachedPath&&this.updateCachedPath())}set limit(t){this._parent.limit=t}set connections(t){return this._connections=t}set cachedPath(t){this._cachedPath=t}}const Xt=null,q=new nt(document.getElementById("canvasId"));nt.loadSVGFilter(`<svg>
    <filter id="turbulence">
      <feTurbulence type="turbulence" baseFrequency="0.01 0.02" numOctaves="1" result="NOISE"></feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="50">
      </feDisplacementMap>
    </filter>
   </svg>`,"cool");const Be=new J(q.render,Q.loadVideo("./vidlol.mp4",!0,!0),[[150,250],[700,600]],Xt,!0,!0),He=new It("Press 'W A S D' keys to move ig !",[200,10],"darkgray",P=>P.textProfile2.update("italic 15px monospace"));q.add(He);const ei=new It("Hello World!",[500,300],Be,P=>P.textProfile1.update("bold 80px monospace"),Xt,Xt,P=>{P.playAnim(new Y(t=>{P.scale=[Math.sin(Math.PI*t*1),1]},-3e3))});q.add(ei);const ii=new At([300,300],[new G([-50,-50])],null,"aqua",100,(P,t,e)=>{t.a=u.mod(1,e,.8),t.radius=u.mod(50,e,50*.8),ue.drawOuterRing(t,[255,255,255,.2],5);let i=q.keyboard,s=300;i.hasKeysDown()&&(i.isDown("a")&&(t.x-=s*q.deltaTime),i.isDown("d")&&(t.x+=s*q.deltaTime),i.isDown("w")&&(t.y-=s*q.deltaTime),i.isDown("s")&&(t.y+=s*q.deltaTime))},null,null,null,[50,0]);q.add(ii);let Ve=new lt(lt.loadAudio("./vidlol.mp4",!0,!0),[200,350],Be,lt.BARS(500,10,3,1),200,!0);q.add(Ve);console.log(q);Ve.filter="url(#cool)";He.filter="blur(0.5px)";q.setMouseMove();q.setMouseLeave();q.setMouseDown();q.setMouseUp();q.setKeyDown(Xt,!0);q.setKeyUp(Xt,!0);q.startLoop();
